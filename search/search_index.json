{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Cloud Native Journey - \u4e2a\u4eba\u4e91\u539f\u751f\u77e5\u8bc6\u5e93 https://img.shields.io/github/last-commit/weizhiwang221/cloud-native-journey?style=flat-square https://img.shields.io/github/repo-size/weizhiwang221/cloud-native-journey?style=flat-square https://img.shields.io/github/license/weizhiwang221/cloud-native-journey?style=flat-square \u4e00\u540d\u4e91\u8ba1\u7b97\u8fd0\u7ef4\u5de5\u7a0b\u5e08\u7684\u4e91\u539f\u751f\u5b66\u4e60\u4e0e\u5b9e\u8df5\u4e4b\u65c5\u3002\u672c\u4ed3\u5e93\u8bb0\u5f55\u4e86\u5173\u4e8e Kubernetes\u3001DevOps\u3001\u4e91\u5e73\u53f0\u53ca\u76f8\u5173\u6280\u672f\u7684\u77e5\u8bc6\u603b\u7ed3\u3001\u5b9e\u8df5\u7b14\u8bb0\u548c\u6545\u969c\u6392\u67e5\u7ecf\u9a8c\u3002 \ud83c\udf10 \u5728\u7ebf\u8bbf\u95ee\u77e5\u8bc6\u5e93\u7f51\u7ad9 \ud83d\udcd6 \u76ee\u5f55\u6982\u89c8 Kubernetes \u4e91\u5e73\u53f0 CI/CD \u57fa\u7840\u8bbe\u65bd\u5373\u4ee3\u7801 \u76d1\u63a7\u4e0e\u65e5\u5fd7 \u9879\u76ee\u5b9e\u8df5 \u6545\u969c\u6392\u67e5 \u5b66\u4e60\u8d44\u6e90 \u8054\u7cfb\u65b9\u5f0f \ud83d\ude80 \u5185\u5bb9\u5bfc\u822a \u2638\ufe0f Kubernetes \u6838\u5fc3\u6982\u5ff5 - Pods, Deployments, Services \u7b49 \u7f51\u7edc\u8be6\u89e3 - CNI, Service, Ingress, \u7f51\u7edc\u7b56\u7565 \u5b58\u50a8\u7ba1\u7406 - PV, PVC, StorageClass, CSI \u5b89\u5168\u5b9e\u8df5 - RBAC, ServiceAccounts, \u5b89\u5168\u4e0a\u4e0b\u6587 \u8fd0\u7ef4\u7ba1\u7406 - Helm, Operator, \u5347\u7ea7\u7b56\u7565 \u9ad8\u7ea7\u8c03\u5ea6 - \u4eb2\u548c\u6027/\u53cd\u4eb2\u548c\u6027, \u6c61\u70b9\u4e0e\u5bb9\u5fcd \u2601\ufe0f \u4e91\u5e73\u53f0 AWS EKS \u5b9e\u6218 IAM \u6743\u9650\u7ba1\u7406 RDS \u4e0e\u5b58\u50a8\u670d\u52a1 Azure AKS \u90e8\u7f72\u6307\u5357 GCP GKE \u5165\u95e8 \ud83d\udd01 CI/CD GitHub Actions \u5b9e\u6218 GitLab CI \u5b8c\u6574\u6d41\u7a0b ArgoCD GitOps \u5b9e\u8df5 Jenkins Pipeline \u8fdb\u9636 \ud83d\udcdc \u57fa\u7840\u8bbe\u65bd\u5373\u4ee3\u7801 Terraform \u6a21\u5757\u5316\u5b9e\u8df5 Ansible \u6700\u4f73\u5b9e\u8df5 \ud83d\udcca \u76d1\u63a7\u4e0e\u65e5\u5fd7 Prometheus + Grafana \u5168\u65b9\u4f4d\u76d1\u63a7 Loki \u65e5\u5fd7\u7cfb\u7edf\u5b9e\u6218 \u544a\u8b66\u914d\u7f6e\u4e0e\u7ba1\u7406 \ud83d\udee0\ufe0f \u9879\u76ee\u5b9e\u8df5 \u9879\u76ee\u4e00\uff1a\u57fa\u4e8eK8s\u7684\u5fae\u670d\u52a1\u7535\u5546\u5e73\u53f0 \u9879\u76ee\u4e8c\uff1aTerraform\u81ea\u52a8\u5316\u90e8\u7f72EKS\u96c6\u7fa4 \u9879\u76ee\u4e09\uff1aGitOps\u6d41\u6c34\u7ebf\u5b9e\u6218 \ud83d\udd27 \u6545\u969c\u6392\u67e5 Kubernetes \u5e38\u89c1\u95ee\u9898\u6392\u67e5 \u7f51\u7edc\u95ee\u9898\u6392\u67e5\u6307\u5357 \u5b58\u50a8\u95ee\u9898\u6392\u67e5 \u6027\u80fd\u8c03\u4f18\u6848\u4f8b \ud83d\udcda \u5b66\u4e60\u8d44\u6e90 \u63a8\u8350\u4e66\u7c4d \u300aKubernetes\u6743\u5a01\u6307\u5357\u300b \u300a\u4e91\u539f\u751f\u6a21\u5f0f\u300b \u300aSite Reliability Engineering\u300b \ud83d\udcde \u8054\u7cfb\u65b9\u5f0f \u9b4f\u5fd7\u65fa - @weizhiwang221 - weizhiwanglinux@163.com \u9879\u76ee\u94fe\u63a5: https://github.com/weizhiwang221/cloud-native-journey","title":"Cloud Native Journey - \u4e2a\u4eba\u4e91\u539f\u751f\u77e5\u8bc6\u5e93"},{"location":"#cloud-native-journey-","text":"https://img.shields.io/github/last-commit/weizhiwang221/cloud-native-journey?style=flat-square https://img.shields.io/github/repo-size/weizhiwang221/cloud-native-journey?style=flat-square https://img.shields.io/github/license/weizhiwang221/cloud-native-journey?style=flat-square \u4e00\u540d\u4e91\u8ba1\u7b97\u8fd0\u7ef4\u5de5\u7a0b\u5e08\u7684\u4e91\u539f\u751f\u5b66\u4e60\u4e0e\u5b9e\u8df5\u4e4b\u65c5\u3002\u672c\u4ed3\u5e93\u8bb0\u5f55\u4e86\u5173\u4e8e Kubernetes\u3001DevOps\u3001\u4e91\u5e73\u53f0\u53ca\u76f8\u5173\u6280\u672f\u7684\u77e5\u8bc6\u603b\u7ed3\u3001\u5b9e\u8df5\u7b14\u8bb0\u548c\u6545\u969c\u6392\u67e5\u7ecf\u9a8c\u3002 \ud83c\udf10 \u5728\u7ebf\u8bbf\u95ee\u77e5\u8bc6\u5e93\u7f51\u7ad9","title":"Cloud Native Journey - \u4e2a\u4eba\u4e91\u539f\u751f\u77e5\u8bc6\u5e93"},{"location":"#_1","text":"Kubernetes \u4e91\u5e73\u53f0 CI/CD \u57fa\u7840\u8bbe\u65bd\u5373\u4ee3\u7801 \u76d1\u63a7\u4e0e\u65e5\u5fd7 \u9879\u76ee\u5b9e\u8df5 \u6545\u969c\u6392\u67e5 \u5b66\u4e60\u8d44\u6e90 \u8054\u7cfb\u65b9\u5f0f","title":"\ud83d\udcd6 \u76ee\u5f55\u6982\u89c8"},{"location":"#_2","text":"","title":"\ud83d\ude80 \u5185\u5bb9\u5bfc\u822a"},{"location":"#kubernetes","text":"\u6838\u5fc3\u6982\u5ff5 - Pods, Deployments, Services \u7b49 \u7f51\u7edc\u8be6\u89e3 - CNI, Service, Ingress, \u7f51\u7edc\u7b56\u7565 \u5b58\u50a8\u7ba1\u7406 - PV, PVC, StorageClass, CSI \u5b89\u5168\u5b9e\u8df5 - RBAC, ServiceAccounts, \u5b89\u5168\u4e0a\u4e0b\u6587 \u8fd0\u7ef4\u7ba1\u7406 - Helm, Operator, \u5347\u7ea7\u7b56\u7565 \u9ad8\u7ea7\u8c03\u5ea6 - \u4eb2\u548c\u6027/\u53cd\u4eb2\u548c\u6027, \u6c61\u70b9\u4e0e\u5bb9\u5fcd","title":"\u2638\ufe0f Kubernetes"},{"location":"#_3","text":"AWS EKS \u5b9e\u6218 IAM \u6743\u9650\u7ba1\u7406 RDS \u4e0e\u5b58\u50a8\u670d\u52a1 Azure AKS \u90e8\u7f72\u6307\u5357 GCP GKE \u5165\u95e8","title":"\u2601\ufe0f \u4e91\u5e73\u53f0"},{"location":"#cicd","text":"GitHub Actions \u5b9e\u6218 GitLab CI \u5b8c\u6574\u6d41\u7a0b ArgoCD GitOps \u5b9e\u8df5 Jenkins Pipeline \u8fdb\u9636","title":"\ud83d\udd01 CI/CD"},{"location":"#_4","text":"Terraform \u6a21\u5757\u5316\u5b9e\u8df5 Ansible \u6700\u4f73\u5b9e\u8df5","title":"\ud83d\udcdc \u57fa\u7840\u8bbe\u65bd\u5373\u4ee3\u7801"},{"location":"#_5","text":"Prometheus + Grafana \u5168\u65b9\u4f4d\u76d1\u63a7 Loki \u65e5\u5fd7\u7cfb\u7edf\u5b9e\u6218 \u544a\u8b66\u914d\u7f6e\u4e0e\u7ba1\u7406","title":"\ud83d\udcca \u76d1\u63a7\u4e0e\u65e5\u5fd7"},{"location":"#_6","text":"\u9879\u76ee\u4e00\uff1a\u57fa\u4e8eK8s\u7684\u5fae\u670d\u52a1\u7535\u5546\u5e73\u53f0 \u9879\u76ee\u4e8c\uff1aTerraform\u81ea\u52a8\u5316\u90e8\u7f72EKS\u96c6\u7fa4 \u9879\u76ee\u4e09\uff1aGitOps\u6d41\u6c34\u7ebf\u5b9e\u6218","title":"\ud83d\udee0\ufe0f \u9879\u76ee\u5b9e\u8df5"},{"location":"#_7","text":"Kubernetes \u5e38\u89c1\u95ee\u9898\u6392\u67e5 \u7f51\u7edc\u95ee\u9898\u6392\u67e5\u6307\u5357 \u5b58\u50a8\u95ee\u9898\u6392\u67e5 \u6027\u80fd\u8c03\u4f18\u6848\u4f8b","title":"\ud83d\udd27 \u6545\u969c\u6392\u67e5"},{"location":"#_8","text":"","title":"\ud83d\udcda \u5b66\u4e60\u8d44\u6e90"},{"location":"#_9","text":"\u300aKubernetes\u6743\u5a01\u6307\u5357\u300b \u300a\u4e91\u539f\u751f\u6a21\u5f0f\u300b \u300aSite Reliability Engineering\u300b","title":"\u63a8\u8350\u4e66\u7c4d"},{"location":"#_10","text":"\u9b4f\u5fd7\u65fa - @weizhiwang221 - weizhiwanglinux@163.com \u9879\u76ee\u94fe\u63a5: https://github.com/weizhiwang221/cloud-native-journey","title":"\ud83d\udcde \u8054\u7cfb\u65b9\u5f0f"},{"location":"%E6%8A%80%E6%9C%AF/docker/","text":"docker","title":"docker"},{"location":"%E6%8A%80%E6%9C%AF/docker/#docker","text":"","title":"docker"},{"location":"%E6%8A%80%E6%9C%AF/kubectl%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/","text":"kubectl \u547d\u4ee4\u5927\u5168 \u7ba1\u7406\u8d44\u6e90 : \u547d\u4ee4 \u63cf\u8ff0 kubectl create \u521b\u5efa\u8d44\u6e90\u5bf9\u8c61\uff0c\u5982Pod\u3001Deployment\u7b49 kubectl apply \u5e94\u7528\u914d\u7f6e\u6587\u4ef6\u6216\u8d44\u6e90\u5bf9\u8c61\u7684\u66f4\u6539 kubectl get \u83b7\u53d6\u8d44\u6e90\u5bf9\u8c61\u7684\u4fe1\u606f kubectl describe \u663e\u793a\u8d44\u6e90\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f kubectl edit \u7f16\u8f91\u8d44\u6e90\u5bf9\u8c61\u7684\u914d\u7f6e kubectl delete \u5220\u9664\u8d44\u6e90\u5bf9\u8c61 kubectl replace \u7528\u65b0\u7684\u8d44\u6e90\u5bf9\u8c61\u66ff\u6362\u73b0\u6709\u7684\u8d44\u6e90\u5bf9\u8c61 kubectl scale \u8c03\u6574Deployment\u6216ReplicaSet\u7684\u526f\u672c\u6570 kubectl rollout \u7ba1\u7406\u6eda\u52a8\u5347\u7ea7Deployment\u7684\u8fc7\u7a0b \u67e5\u770b\u8d44\u6e90 : \u547d\u4ee4 \u63cf\u8ff0 kubectl get \u83b7\u53d6\u8d44\u6e90\u5bf9\u8c61\u7684\u4fe1\u606f kubectl describe \u663e\u793a\u8d44\u6e90\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f kubectl logs \u67e5\u770bPod\u7684\u65e5\u5fd7 kubectl port-forward \u5c06\u672c\u5730\u7aef\u53e3\u6620\u5c04\u5230Pod\u4e0a\u7684\u7aef\u53e3 kubectl top \u67e5\u770b\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff08CPU\u3001\u5185\u5b58\u7b49\uff09 \u6545\u969c\u6392\u9664\u548c\u8bca\u65ad : \u547d\u4ee4 \u63cf\u8ff0 kubectl exec \u5728Pod\u5185\u90e8\u6267\u884c\u547d\u4ee4 kubectl attach \u8fde\u63a5\u5230Pod\u5e76\u67e5\u770b\u5176\u8f93\u51fa kubectl cp \u4ecePod\u590d\u5236\u6587\u4ef6\u5230\u672c\u5730\uff0c\u6216\u4ece\u672c\u5730\u590d\u5236\u5230Pod kubectl describe \u663e\u793a\u8d44\u6e90\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f\uff08\u7528\u4e8e\u6392\u67e5\u95ee\u9898\uff09 kubectl logs \u67e5\u770bPod\u7684\u65e5\u5fd7\uff08\u7528\u4e8e\u6392\u67e5\u95ee\u9898\uff09 \u96c6\u7fa4\u7ba1\u7406 : \u547d\u4ee4 \u63cf\u8ff0 kubectl cluster-info \u67e5\u770b\u96c6\u7fa4\u4fe1\u606f kubectl config \u7ba1\u7406Kubernetes\u914d\u7f6e\u6587\u4ef6 kubectl version \u67e5\u770bKubernetes\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7248\u672c\u4fe1\u606f kubectl proxy \u542f\u52a8\u672c\u5730\u4ee3\u7406\u4ee5\u8bbf\u95eeKubernetes API kubectl taint \u6dfb\u52a0\u6216\u79fb\u9664\u8282\u70b9\u7684\u6c61\u70b9 kubectl uncordon \u4f7f\u8282\u70b9\u91cd\u65b0\u53ef\u8c03\u5ea6 kubectl drain \u9a71\u9010\u8282\u70b9\u4e0a\u7684Pod\u4ee5\u7ef4\u62a4\u8282\u70b9 kubectl cordon \u963b\u6b62\u8282\u70b9\u8c03\u5ea6\u65b0\u7684Pod \u5b89\u5168\u6027\u548c\u8eab\u4efd\u9a8c\u8bc1 : \u547d\u4ee4 \u63cf\u8ff0 kubectl auth \u7ba1\u7406\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743 kubectl create serviceaccount \u521b\u5efa\u670d\u52a1\u8d26\u53f7 kubectl create role \u521b\u5efa\u89d2\u8272 kubectl create rolebinding \u521b\u5efa\u89d2\u8272\u7ed1\u5b9a \u5176\u4ed6 : \u547d\u4ee4 \u63cf\u8ff0 kubectl label \u4e3a\u8d44\u6e90\u5bf9\u8c61\u6dfb\u52a0\u6807\u7b7e\u6216\u4fee\u6539\u6807\u7b7e kubectl annotate \u4e3a\u8d44\u6e90\u5bf9\u8c61\u6dfb\u52a0\u6ce8\u91ca\u6216\u4fee\u6539\u6ce8\u91ca kubectl rollout \u7ba1\u7406\u6eda\u52a8\u5347\u7ea7Deployment\u7684\u8fc7\u7a0b kubectl explain \u67e5\u770bKubernetes\u8d44\u6e90\u5bf9\u8c61\u7684\u5b9a\u4e49\u548c\u5b57\u6bb5\u542b\u4e49 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e9b\u5e38\u89c1\u7684kubectl\u547d\u4ee4\uff0cKubernetes\u6709\u5f88\u591a\u529f\u80fd\u548c\u8d44\u6e90\u7c7b\u578b\uff0c\u56e0\u6b64\u8fd8\u6709\u5176\u4ed6\u547d\u4ee4\u548c\u9009\u9879\u53ef\u4f9b\u4f7f\u7528\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 kubectl --help \u67e5\u770bkubectl\u7684\u5168\u5c40\u9009\u9879\u4ee5\u53ca\u5404\u4e2a\u5b50\u547d\u4ee4\u7684\u9009\u9879\u548c\u7528\u6cd5\u3002","title":"kubectl \u547d\u4ee4\u5927\u5168"},{"location":"%E6%8A%80%E6%9C%AF/kubectl%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/#kubectl","text":"\u7ba1\u7406\u8d44\u6e90 : \u547d\u4ee4 \u63cf\u8ff0 kubectl create \u521b\u5efa\u8d44\u6e90\u5bf9\u8c61\uff0c\u5982Pod\u3001Deployment\u7b49 kubectl apply \u5e94\u7528\u914d\u7f6e\u6587\u4ef6\u6216\u8d44\u6e90\u5bf9\u8c61\u7684\u66f4\u6539 kubectl get \u83b7\u53d6\u8d44\u6e90\u5bf9\u8c61\u7684\u4fe1\u606f kubectl describe \u663e\u793a\u8d44\u6e90\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f kubectl edit \u7f16\u8f91\u8d44\u6e90\u5bf9\u8c61\u7684\u914d\u7f6e kubectl delete \u5220\u9664\u8d44\u6e90\u5bf9\u8c61 kubectl replace \u7528\u65b0\u7684\u8d44\u6e90\u5bf9\u8c61\u66ff\u6362\u73b0\u6709\u7684\u8d44\u6e90\u5bf9\u8c61 kubectl scale \u8c03\u6574Deployment\u6216ReplicaSet\u7684\u526f\u672c\u6570 kubectl rollout \u7ba1\u7406\u6eda\u52a8\u5347\u7ea7Deployment\u7684\u8fc7\u7a0b \u67e5\u770b\u8d44\u6e90 : \u547d\u4ee4 \u63cf\u8ff0 kubectl get \u83b7\u53d6\u8d44\u6e90\u5bf9\u8c61\u7684\u4fe1\u606f kubectl describe \u663e\u793a\u8d44\u6e90\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f kubectl logs \u67e5\u770bPod\u7684\u65e5\u5fd7 kubectl port-forward \u5c06\u672c\u5730\u7aef\u53e3\u6620\u5c04\u5230Pod\u4e0a\u7684\u7aef\u53e3 kubectl top \u67e5\u770b\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff08CPU\u3001\u5185\u5b58\u7b49\uff09 \u6545\u969c\u6392\u9664\u548c\u8bca\u65ad : \u547d\u4ee4 \u63cf\u8ff0 kubectl exec \u5728Pod\u5185\u90e8\u6267\u884c\u547d\u4ee4 kubectl attach \u8fde\u63a5\u5230Pod\u5e76\u67e5\u770b\u5176\u8f93\u51fa kubectl cp \u4ecePod\u590d\u5236\u6587\u4ef6\u5230\u672c\u5730\uff0c\u6216\u4ece\u672c\u5730\u590d\u5236\u5230Pod kubectl describe \u663e\u793a\u8d44\u6e90\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f\uff08\u7528\u4e8e\u6392\u67e5\u95ee\u9898\uff09 kubectl logs \u67e5\u770bPod\u7684\u65e5\u5fd7\uff08\u7528\u4e8e\u6392\u67e5\u95ee\u9898\uff09 \u96c6\u7fa4\u7ba1\u7406 : \u547d\u4ee4 \u63cf\u8ff0 kubectl cluster-info \u67e5\u770b\u96c6\u7fa4\u4fe1\u606f kubectl config \u7ba1\u7406Kubernetes\u914d\u7f6e\u6587\u4ef6 kubectl version \u67e5\u770bKubernetes\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7248\u672c\u4fe1\u606f kubectl proxy \u542f\u52a8\u672c\u5730\u4ee3\u7406\u4ee5\u8bbf\u95eeKubernetes API kubectl taint \u6dfb\u52a0\u6216\u79fb\u9664\u8282\u70b9\u7684\u6c61\u70b9 kubectl uncordon \u4f7f\u8282\u70b9\u91cd\u65b0\u53ef\u8c03\u5ea6 kubectl drain \u9a71\u9010\u8282\u70b9\u4e0a\u7684Pod\u4ee5\u7ef4\u62a4\u8282\u70b9 kubectl cordon \u963b\u6b62\u8282\u70b9\u8c03\u5ea6\u65b0\u7684Pod \u5b89\u5168\u6027\u548c\u8eab\u4efd\u9a8c\u8bc1 : \u547d\u4ee4 \u63cf\u8ff0 kubectl auth \u7ba1\u7406\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743 kubectl create serviceaccount \u521b\u5efa\u670d\u52a1\u8d26\u53f7 kubectl create role \u521b\u5efa\u89d2\u8272 kubectl create rolebinding \u521b\u5efa\u89d2\u8272\u7ed1\u5b9a \u5176\u4ed6 : \u547d\u4ee4 \u63cf\u8ff0 kubectl label \u4e3a\u8d44\u6e90\u5bf9\u8c61\u6dfb\u52a0\u6807\u7b7e\u6216\u4fee\u6539\u6807\u7b7e kubectl annotate \u4e3a\u8d44\u6e90\u5bf9\u8c61\u6dfb\u52a0\u6ce8\u91ca\u6216\u4fee\u6539\u6ce8\u91ca kubectl rollout \u7ba1\u7406\u6eda\u52a8\u5347\u7ea7Deployment\u7684\u8fc7\u7a0b kubectl explain \u67e5\u770bKubernetes\u8d44\u6e90\u5bf9\u8c61\u7684\u5b9a\u4e49\u548c\u5b57\u6bb5\u542b\u4e49 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e9b\u5e38\u89c1\u7684kubectl\u547d\u4ee4\uff0cKubernetes\u6709\u5f88\u591a\u529f\u80fd\u548c\u8d44\u6e90\u7c7b\u578b\uff0c\u56e0\u6b64\u8fd8\u6709\u5176\u4ed6\u547d\u4ee4\u548c\u9009\u9879\u53ef\u4f9b\u4f7f\u7528\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 kubectl --help \u67e5\u770bkubectl\u7684\u5168\u5c40\u9009\u9879\u4ee5\u53ca\u5404\u4e2a\u5b50\u547d\u4ee4\u7684\u9009\u9879\u548c\u7528\u6cd5\u3002","title":"kubectl \u547d\u4ee4\u5927\u5168"},{"location":"%E6%8A%80%E6%9C%AF/kubernetes/","text":"kubernetes","title":"kubernetes"},{"location":"%E6%8A%80%E6%9C%AF/kubernetes/#kubernetes","text":"","title":"kubernetes"},{"location":"%E6%8A%80%E6%9C%AF/kubernetes%E5%90%84%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9%E6%80%A7%E5%88%86%E6%9E%90/","text":"\u4e00\u3001calico\u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868 *calico\u7248\u672c* *kubernetes\u7248\u672c* *calico\u5b98\u7f51\u5730\u5740* v3.12 v1.14 v1.15 v1.16 v1.17 https://docs.tigera.io/archive/v3.12/getting-started/kubernetes/requirements v.3.13 v1.15 v1.16 v1.17 https://docs.tigera.io/archive/v3.13/getting-started/kubernetes/requirements v3.14 v1.16 v1.17 v1.18 https://docs.tigera.io/archive/v3.14/getting-started/kubernetes/requirements v3.15 v1.16 v1.17 v1.18 https://docs.tigera.io/archive/v3.15/getting-started/kubernetes/requirements v3.16 v1.16 v1.17 v1.18 v1.19 https://docs.tigera.io/archive/v3.16/getting-started/kubernetes/requirements v3.17 v1.17 v1.18 v1.19 https://docs.tigera.io/archive/v3.17/getting-started/kubernetes/requirements v3.18 v1.18 v1.19 v1.20 https://docs.tigera.io/archive/v3.18/getting-started/kubernetes/requirements v3.19 v1.19 v1.20 v1.21 https://docs.tigera.io/archive/v3.19/getting-started/kubernetes/requirements v3.20 v1.19 v1.20 v1.21 https://docs.tigera.io/archive/v3.20/getting-started/kubernetes/requirements v3.21 v1.20 v1.21 v1.22 https://docs.tigera.io/archive/v3.21/getting-started/kubernetes/requirements v3.22 v1.21 v1.22 v1.23 https://docs.tigera.io/archive/v3.22/getting-started/kubernetes/requirements v3.23 v1.21 v1.22 v1.23 https://docs.tigera.io/archive/v3.23/getting-started/kubernetes/requirements v3.24 v1.22 v1.23 v1.24 v1.25 https://docs.tigera.io/calico/3.24/getting-started/kubernetes/requirements v3.25 v1.23 v1.24 v1.25 v1.26 https://docs.tigera.io/calico/3.25/getting-started/kubernetes/requirements v3.26 v1.24 v1.25 v1.26 v1.27 https://docs.tigera.io/calico/latest/getting-started/kubernetes/requirements \u4e8c \u3001 docker \u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868 *k8s\u7248\u672c* *docker\u7248\u672c* *\u67e5\u770b\u5730\u5740* v1.15 1.13.1 17.03 17.06 17.09 18.06 18.09 https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.15.md#server-binaries v1.16 1.13.1 17.03 17.06 17.09 18.06 18.09 https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.16.md v1.17 19.03 https://www.cnblogs.com/jinzhenshui/p/16724379.html v1.18 19.03\u6216\u66f4\u9ad8 https://zhuanlan.zhihu.com/p/121100475 v1.19 19.03\u6216\u66f4\u9ad8 v1.20 19.03\u6216\u66f4\u9ad8 https://blog.csdn.net/alwaysbefine/article/details/119658708 v1.21 20.10\u6216\u66f4\u9ad8 https://www.cnblogs.com/superlinux/p/14676959.html v1.22 20.10\u6216\u66f4\u9ad8 https://blog.csdn.net/qq_30614345/article/details/131334199?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-2-131334199-blog-119430082.235%5Ev38%5Epc_relevant_default_base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-2-131334199-blog-119430082.235%5Ev38%5Epc_relevant_default_base&utm_relevant_index=3 v1.23 20.10\u6216\u66f4\u9ad8 https://blog.csdn.net/yy8623977/article/details/124685772 v1.24 20.10\u6216\u66f4\u9ad8 *k8s v1.24\u4ee5\u540e\u9700\u8981\u989d\u5916\u5b89\u88c5cri-dockerd, k8s\u624d\u80fd\u591f\u6b63\u5e38\u8bc6\u522b\u5230Docker\u3002* v1.25 20.10\u6216\u66f4\u9ad8 https://blog.51cto.com/dayu/5825840 v1.26 20.10\u6216\u66f4\u9ad8 v1.27 20.10\u6216\u66f4\u9ad8 https://blog.csdn.net/zo2k123/article/details/130328617 \u4e09\u3001etcd\u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868 *etcd\u7248\u672c* *kubernetes\u7248\u672c* *\u67e5\u770b\u5730\u5740* 3.2.x v1.11 v1.12 https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.22.md 3.3.x v1.13 v1.14 v1.15 v1.16 3.4.x v1.17 v1.18 v1.19 v1.20 v1.21 3.5.x v1.22 v1.23 v1.24 v1.25 v1.26 v1.27 \u56db\u3001coredns\u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868 *coredns\u7248\u672c* *kubernetes\u7248\u672c* *\u67e5\u770b\u5730\u5740* 1.0.1 v1.09 https://github.com/coredns/deployment/blob/master/kubernetes/CoreDNS-k8s_version.md 1.0.6 v1.10 1.1.3 v1.11 1.2.2 v1.12 1.2.6 v1.13 1.3.1 v1.14 v1.15 1.6.2 v1.16 1.6.5 v1.17 1.6.7 v1.18 1.7.0 v1.19 v1.20 1.8.0 v1.21 1.8.4 v1.22 1.8.6 v1.23 1.9.3 v1.25 v1.26 1.10.1 v1.27","title":"Kubernetes\u5404\u4e2a\u7ec4\u4ef6\u7684\u7248\u672c\u517c\u5bb9\u6027\u5206\u6790"},{"location":"%E6%8A%80%E6%9C%AF/kubernetes%E5%90%84%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9%E6%80%A7%E5%88%86%E6%9E%90/#calicokubernetes","text":"*calico\u7248\u672c* *kubernetes\u7248\u672c* *calico\u5b98\u7f51\u5730\u5740* v3.12 v1.14 v1.15 v1.16 v1.17 https://docs.tigera.io/archive/v3.12/getting-started/kubernetes/requirements v.3.13 v1.15 v1.16 v1.17 https://docs.tigera.io/archive/v3.13/getting-started/kubernetes/requirements v3.14 v1.16 v1.17 v1.18 https://docs.tigera.io/archive/v3.14/getting-started/kubernetes/requirements v3.15 v1.16 v1.17 v1.18 https://docs.tigera.io/archive/v3.15/getting-started/kubernetes/requirements v3.16 v1.16 v1.17 v1.18 v1.19 https://docs.tigera.io/archive/v3.16/getting-started/kubernetes/requirements v3.17 v1.17 v1.18 v1.19 https://docs.tigera.io/archive/v3.17/getting-started/kubernetes/requirements v3.18 v1.18 v1.19 v1.20 https://docs.tigera.io/archive/v3.18/getting-started/kubernetes/requirements v3.19 v1.19 v1.20 v1.21 https://docs.tigera.io/archive/v3.19/getting-started/kubernetes/requirements v3.20 v1.19 v1.20 v1.21 https://docs.tigera.io/archive/v3.20/getting-started/kubernetes/requirements v3.21 v1.20 v1.21 v1.22 https://docs.tigera.io/archive/v3.21/getting-started/kubernetes/requirements v3.22 v1.21 v1.22 v1.23 https://docs.tigera.io/archive/v3.22/getting-started/kubernetes/requirements v3.23 v1.21 v1.22 v1.23 https://docs.tigera.io/archive/v3.23/getting-started/kubernetes/requirements v3.24 v1.22 v1.23 v1.24 v1.25 https://docs.tigera.io/calico/3.24/getting-started/kubernetes/requirements v3.25 v1.23 v1.24 v1.25 v1.26 https://docs.tigera.io/calico/3.25/getting-started/kubernetes/requirements v3.26 v1.24 v1.25 v1.26 v1.27 https://docs.tigera.io/calico/latest/getting-started/kubernetes/requirements","title":"\u4e00\u3001calico\u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868"},{"location":"%E6%8A%80%E6%9C%AF/kubernetes%E5%90%84%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9%E6%80%A7%E5%88%86%E6%9E%90/#dockerkubernetes","text":"*k8s\u7248\u672c* *docker\u7248\u672c* *\u67e5\u770b\u5730\u5740* v1.15 1.13.1 17.03 17.06 17.09 18.06 18.09 https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.15.md#server-binaries v1.16 1.13.1 17.03 17.06 17.09 18.06 18.09 https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.16.md v1.17 19.03 https://www.cnblogs.com/jinzhenshui/p/16724379.html v1.18 19.03\u6216\u66f4\u9ad8 https://zhuanlan.zhihu.com/p/121100475 v1.19 19.03\u6216\u66f4\u9ad8 v1.20 19.03\u6216\u66f4\u9ad8 https://blog.csdn.net/alwaysbefine/article/details/119658708 v1.21 20.10\u6216\u66f4\u9ad8 https://www.cnblogs.com/superlinux/p/14676959.html v1.22 20.10\u6216\u66f4\u9ad8 https://blog.csdn.net/qq_30614345/article/details/131334199?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-2-131334199-blog-119430082.235%5Ev38%5Epc_relevant_default_base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-2-131334199-blog-119430082.235%5Ev38%5Epc_relevant_default_base&utm_relevant_index=3 v1.23 20.10\u6216\u66f4\u9ad8 https://blog.csdn.net/yy8623977/article/details/124685772 v1.24 20.10\u6216\u66f4\u9ad8 *k8s v1.24\u4ee5\u540e\u9700\u8981\u989d\u5916\u5b89\u88c5cri-dockerd, k8s\u624d\u80fd\u591f\u6b63\u5e38\u8bc6\u522b\u5230Docker\u3002* v1.25 20.10\u6216\u66f4\u9ad8 https://blog.51cto.com/dayu/5825840 v1.26 20.10\u6216\u66f4\u9ad8 v1.27 20.10\u6216\u66f4\u9ad8 https://blog.csdn.net/zo2k123/article/details/130328617","title":"\u4e8c\u3001docker\u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868"},{"location":"%E6%8A%80%E6%9C%AF/kubernetes%E5%90%84%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9%E6%80%A7%E5%88%86%E6%9E%90/#etcdkubernetes","text":"*etcd\u7248\u672c* *kubernetes\u7248\u672c* *\u67e5\u770b\u5730\u5740* 3.2.x v1.11 v1.12 https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.22.md 3.3.x v1.13 v1.14 v1.15 v1.16 3.4.x v1.17 v1.18 v1.19 v1.20 v1.21 3.5.x v1.22 v1.23 v1.24 v1.25 v1.26 v1.27","title":"\u4e09\u3001etcd\u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868"},{"location":"%E6%8A%80%E6%9C%AF/kubernetes%E5%90%84%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9%E6%80%A7%E5%88%86%E6%9E%90/#corednskubernetes","text":"*coredns\u7248\u672c* *kubernetes\u7248\u672c* *\u67e5\u770b\u5730\u5740* 1.0.1 v1.09 https://github.com/coredns/deployment/blob/master/kubernetes/CoreDNS-k8s_version.md 1.0.6 v1.10 1.1.3 v1.11 1.2.2 v1.12 1.2.6 v1.13 1.3.1 v1.14 v1.15 1.6.2 v1.16 1.6.5 v1.17 1.6.7 v1.18 1.7.0 v1.19 v1.20 1.8.0 v1.21 1.8.4 v1.22 1.8.6 v1.23 1.9.3 v1.25 v1.26 1.10.1 v1.27","title":"\u56db\u3001coredns\u4e0ekubernetes\u517c\u5bb9\u6027\u5bf9\u7167\u8868"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/","text":"\u4ec0\u4e48\u662f Kind Kind \uff08Kubernetes in Docker\uff09 \u662f\u4e00\u4e2a Kubernetes \u5b75\u5316\u9879\u76ee\uff0c Kind \u662f\u4e00\u5957\u5f00\u7bb1\u5373\u7528\u7684 Kubernetes \u73af\u5883\u642d\u5efa\u65b9\u6848\u3002\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5c06 Kubernetes \u6240\u9700\u8981\u7684\u6240\u6709\u7ec4\u4ef6\uff0c\u5168\u90e8\u90e8\u7f72\u5728\u4e00\u4e2a Docker \u5bb9\u5668 \u4e2d\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u642d\u5efa Kubernetes \u96c6\u7fa4\u3002 Kind \u5df2\u7ecf\u5e7f\u6cdb\u7684\u5e94\u7528\u4e8e Kubernetes \u4e0a\u6e38\u53ca\u76f8\u5173\u9879\u76ee\u7684 CI \u73af\u5883\u4e2d\uff0c\u5b98\u65b9\u6587\u6863\u4e2d\u4e5f\u628a Kind \u4f5c\u4e3a\u4e00\u79cd\u672c\u5730\u96c6\u7fa4\u642d\u5efa\u7684\u5de5\u5177\u63a8\u8350\u7ed9\u5927\u5bb6\u3002 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/kubernetes-sigs/kind Kind \u53ef\u4ee5\u505a\u4ec0\u4e48\uff1f \u5feb\u901f\u521b\u5efa\u4e00\u4e2a\u6216\u591a\u4e2a Kubernetes \u96c6\u7fa4 \u652f\u6301\u90e8\u7f72\u9ad8\u53ef\u7528\u7684 Kubernetes \u96c6\u7fa4 \u652f\u6301\u4ece\u6e90\u7801\u6784\u5efa\u5e76\u90e8\u7f72\u4e00\u4e2a Kubernetes \u96c6\u7fa4 \u53ef\u4ee5\u5feb\u901f\u4f4e\u6210\u672c\u4f53\u9a8c\u4e00\u4e2a\u6700\u65b0\u7684 Kubernetes \u96c6\u7fa4\uff0c\u5e76\u652f\u6301 Kubernetes \u7684\u7edd\u5927\u90e8\u5206\u529f\u80fd \u652f\u6301\u672c\u5730\u79bb\u7ebf\u8fd0\u884c\u4e00\u4e2a\u591a\u8282\u70b9\u96c6\u7fa4 Kind \u6709\u54ea\u4e9b\u4f18\u52bf\uff1f \u6700\u5c0f\u7684\u5b89\u88c5\u4f9d\u8d56\uff0c\u4ec5\u9700\u8981\u5b89\u88c5 Docker \u5373\u53ef \u4f7f\u7528\u65b9\u6cd5\u7b80\u5355\uff0c\u53ea\u9700 Kind Cli \u5de5\u5177\u5373\u53ef\u5feb\u901f\u521b\u5efa\u96c6\u7fa4 \u4f7f\u7528\u5bb9\u5668\u6765\u6a21\u4f3c Kubernetes \u8282\u70b9 \u5185\u90e8\u4f7f\u7528 Kubeadm \u7684\u5b98\u65b9\u4e3b\u6d41\u90e8\u7f72\u5de5\u5177 \u901a\u8fc7\u4e86 CNCF \u5b98\u65b9\u7684 K8S Conformance \u6d4b\u8bd5 Kind \u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff1f Kind \u4f7f\u7528\u5bb9\u5668\u6765\u6a21\u62df\u6bcf\u4e00\u4e2a Kubernetes \u8282\u70b9\uff0c\u5e76\u5728\u5bb9\u5668\u91cc\u9762\u8fd0\u884c Systemd \u3002 \u5bb9\u5668\u91cc\u7684 Systemd \u6258\u7ba1\u4e86 Kubelet \u548c Containerd \uff0c\u7136\u540e\u5bb9\u5668\u5185\u90e8\u7684 Kubelet \u628a\u5176\u5b83 Kubernetes \u7ec4\u4ef6\uff1a Kube-Apiserver \u3001 Etcd \u3001 CNI \u7b49\u7b49\u7ec4\u4ef6\u8fd0\u884c\u8d77\u6765\u3002 Kind \u5185\u90e8\u4f7f\u7528\u4e86 Kubeadm \u8fd9\u4e2a\u5de5\u5177\u6765\u505a\u96c6\u7fa4\u7684\u90e8\u7f72\uff0c\u5305\u62ec\u9ad8\u53ef\u7528\u96c6\u7fa4\u4e5f\u662f\u501f\u52a9 Kubeadm \u63d0\u4f9b\u7684\u7279\u6027\u6765\u5b8c\u6210\u7684\u3002\u5728\u9ad8\u7528\u96c6\u7fa4\u4e0b\u8fd8\u4f1a\u989d\u5916\u90e8\u7f72\u4e86\u4e00\u4e2a Nginx \u6765\u63d0\u4f9b \u8d1f\u8f7d\u5747\u8861 VIP \u3002 \u5b89\u88c5 Kind \u5b89\u88c5 Kind \u4f9d\u8d56\u7ec4\u4ef6 Kind \u628a\u90e8\u7f72 Kubernetes \u73af\u5883\u7684\u4f9d\u8d56\u964d\u4f4e\u5230\u4e86\u6700\u5c0f\uff0c\u4ec5\u9700\u8981\u673a\u5668\u5b89\u88c5 Docker \u5373\u53ef\u3002 \u5b89\u88c5 Docker \u8fd9\u91cc\u4ee5 Linux \u7cfb\u7edf\u4e3a\u4f8b\uff1a $ curl -sSL https://get.daocloud.io/docker | sh \u66f4\u591a\u5e73\u53f0\u7684\u5b89\u88c5\u65b9\u6cd5\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1ahttps://docs.docker.com/install/ \u5b89\u88c5 Kubectl \u5982\u679c\u4f60\u9700\u8981\u901a\u8fc7\u547d\u4ee4\u884c\u7ba1\u7406\u96c6\u7fa4\uff0c\u5219\u9700\u8981\u5b89\u88c5 Kubectl \u3002 \u8fd9\u91cc\u4ee5 Linux \u7cfb\u7edf\u4e3a\u4f8b\uff1a $ curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.15.0/bin/linux/amd64/kubectl $ chmod +x ./kubectl $ sudo mv ./kubectl /usr/local/bin/kubectl \u66f4\u591a\u5e73\u53f0\u7684\u5b89\u88c5\u65b9\u6cd5\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1ahttps://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl \u5b89\u88c5 Kind Kind \u4f7f\u7528 Golang \u8fdb\u884c\u5f00\u53d1\uff0c\u539f\u751f\u652f\u6301\u826f\u597d\u7684\u8de8\u5e73\u53f0\u7279\u6027\uff0c\u901a\u5e38\u53ea\u9700\u8981\u76f4\u63a5\u4e0b\u8f7d\u6784\u5efa\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5c31\u53ef\u4f7f\u7528\u3002 \u901a\u8fc7\u4e8c\u8fdb\u5236\u5b89\u88c5 Linux $ curl -Lo ./kind https://github.com/kubernetes-sigs/kind/releases/download/v0.5.1/kind-linux-amd64 $ chmod +x ./kind $ mv ./kind /usr/local/bin/kind Windows $ curl.exe -Lo kind-windows-amd64.exe https://github.com/kubernetes-sigs/kind/releases/download/v0.5.1/kind-windows-amd64 $ mv .\\kind-windows-amd64.exe c:\\kind.exe \u66f4\u591a\u5e73\u53f0\u7684\u5b89\u88c5\u65b9\u6cd5\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1ahttps://kind.sigs.k8s.io/docs/user/quick-start/ \u901a\u8fc7\u6e90\u7801\u5b89\u88c5 \u5982\u679c\u672c\u5730\u73af\u5883\u5df2\u7ecf\u914d\u7f6e\u597d Golang (1.11+) \u7684\u5f00\u53d1\u73af\u5883\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u6e90\u7801\u8fdb\u884c\u5b89\u88c5\u3002 $ go get sigs.k8s.io/kind@v0.5.1 \u8fd0\u884c\u5b8c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u4f1a\u5c06 Kind \u7684\u53ef\u6267\u884c\u6587\u4ef6\u653e\u5230 $GOPATH/bin \u76ee\u5f55\u5185\u3002\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528\uff0c\u4f60\u9700\u8981\u5c06\u6b64\u76ee\u5f55\u52a0\u5165\u5230 $PATH \u4e2d\u3002 \u4f7f\u7528 Kind \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6765\u770b\u770b Kind \u652f\u6301\u54ea\u4e9b\u547d\u4ee4\u884c\u64cd\u4f5c\u3002 $ kind kind creates and manages local Kubernetes clusters using Docker container 'nodes' Usage: kind [command] Available Commands: build Build one of [base-image, node-image] create Creates one of [cluster] delete Deletes one of [cluster] export exports one of [logs] get Gets one of [clusters, nodes, kubeconfig-path] help Help about any command load Loads images into nodes version prints the kind CLI version Flags: -h, --help help for kind --loglevel string logrus log level [panic, fatal, error, warning, info, debug] (default \"warning\") --version version for kind Use \"kind [command] --help\" for more information about a command. \u7b80\u5355\u8bf4\u4e0b\u51e0\u4e2a\u6bd4\u8f83\u5e38\u7528\u9009\u9879\u7684\u542b\u4e49\uff1a build \uff1a\u7528\u6765\u4ece Kubernetes \u6e90\u4ee3\u7801\u6784\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\u3002 create \uff1a\u521b\u5efa\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u3002 delete \uff1a\u5220\u9664\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u3002 get \uff1a\u53ef\u7528\u6765\u67e5\u770b\u5f53\u524d\u96c6\u7fa4\u3001\u8282\u70b9\u4fe1\u606f\u4ee5\u53ca Kubectl \u914d\u7f6e\u6587\u4ef6\u7684\u5730\u5740\u3002 load \uff1a\u4ece \u5bbf\u4e3b\u673a \u5411 Kubernetes \u8282\u70b9\u5185\u5bfc\u5165\u955c\u50cf\u3002 \u4f7f\u7528 Kind \u521b\u5efa Kubernetes \u96c6\u7fa4 \u642d\u5efa\u4e00\u4e2a\u5355\u8282\u70b9\u96c6\u7fa4 \u642d\u5efa\u5355\u8282\u70b9\u96c6\u7fa4\u662f Kind \u6700\u57fa\u7840\u7684\u529f\u80fd\uff0c\u5f53\u7136\u4f7f\u7528\u8d77\u6765\u4e5f\u5f88\u7b80\u5355\uff0c\u4ec5\u9700\u4e00\u6761\u6307\u4ee4\u5373\u53ef\u5b8c\u6210\u3002 $ kind create cluster --name my-cluster Creating cluster \"my-cluster\" ... \u2713 Ensuring node image (kindest/node:v1.15.3) ? \u2713 Preparing nodes ? \u2713 Creating kubeadm config ? \u2713 Starting control-plane ?\ufe0f Cluster creation complete. You can now use the cluster with: export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster\")\" kubectl cluster-info \u4ee5\u4e0a\u547d\u4ee4\u4e2d --name \u662f\u53ef\u9009\u53c2\u6570\u3002\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u9ed8\u8ba4\u521b\u5efa\u51fa\u6765\u7684\u96c6\u7fa4\u540d\u5b57\u4e3a kind \u3002 \u4f7f\u7528\u9ed8\u8ba4\u5b89\u88c5\u7684\u65b9\u5f0f\u65f6\uff0c\u6211\u4eec\u6ca1\u6709\u6307\u5b9a\u4efb\u4f55\u914d\u7f6e\u6587\u4ef6\u3002\u4ece\u5b89\u88c5\u8fc7\u7a0b\u7684\u8f93\u51fa\u6765\u770b\uff0c\u4e00\u5171\u5206\u4e3a 4 \u6b65\uff1a \u68c0\u67e5\u672c\u5730\u73af\u5883\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u57fa\u7840\u7684\u5b89\u88c5\u955c\u50cf\uff0c\u9ed8\u8ba4\u662f kindest/node:v1.15.3 \uff0c\u8be5\u955c\u50cf\u91cc\u9762\u5305\u542b\u4e86\u6240\u6709\u9700\u8981\u5b89\u88c5\u7684\u4e1c\u897f\uff0c\u5305\u62ec\uff1a kubectl \u3001 kubeadm \u3001 kubelet \u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4ee5\u53ca\u5b89\u88c5\u5bf9\u5e94\u7248\u672c Kubernetes \u6240\u9700\u8981\u7684\u955c\u50cf\u3002 \u51c6\u5907 Kubernetes \u8282\u70b9\uff0c\u4e3b\u8981\u5c31\u662f\u542f\u52a8\u5bb9\u5668\u3001\u89e3\u538b\u955c\u50cf\u8fd9\u7c7b\u7684\u64cd\u4f5c\u3002 \u5efa\u7acb\u5bf9\u5e94\u7684 kubeadm \u7684\u914d\u7f6e\uff0c\u5b8c\u6210\u4e4b\u540e\u5c31\u901a\u8fc7 kubeadm \u8fdb\u884c\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u540e\u8fd8\u4f1a\u505a\u4e00\u4e9b\u6e05\u7406\u64cd\u4f5c\uff0c\u6bd4\u5982\uff1a\u5220\u6389\u4e3b\u8282\u70b9\u4e0a\u7684\u6c61\u70b9\uff0c\u5426\u5219\u5bf9\u4e8e\u6ca1\u6709\u5bb9\u5fcd\u7684 Pod \u65e0\u6cd5\u5b8c\u6210\u90e8\u7f72\u3002 \u4e0a\u9762\u6240\u6709\u64cd\u4f5c\u90fd\u5b8c\u6210\u540e\uff0c\u5c31\u6210\u529f\u542f\u52a8\u4e86\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u5e76\u8f93\u51fa\u4e00\u4e9b\u64cd\u4f5c\u96c6\u7fa4\u7684\u63d0\u793a\u4fe1\u606f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c Kind \u4f1a\u5148\u4e0b\u8f7d kindest/node:v1.15.3 \u955c\u50cf\u3002\u5982\u679c\u4f60\u60f3\u6307\u5b9a\u4e0d\u540c\u7248\u672c\uff0c\u53ef\u4ee5\u4f7f\u7528 --image \u53c2\u6570\uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a kind create cluster --image kindest/node:v1.15.3 kindest/node \u8fd9\u4e2a\u955c\u50cf\u76ee\u524d\u6258\u7ba1\u4e8e Docker Hub \u4e0a\uff0c\u4e0b\u8f7d\u65f6\u53ef\u80fd\u4f1a\u8f83\u6162\u3002\u540c\u6837\u7684\u95ee\u9898 Kind \u8fdb\u884c\u96c6\u7fa4\u7684\u521b\u5efa\u4e5f\u662f\u5b58\u5728\u7684\uff0c Kind \u5b9e\u9645\u4f7f\u7528 Kubeadm \u8fdb\u884c\u96c6\u7fa4\u7684\u521b\u5efa\u3002\u5bf9 Kubeadm \u6709\u6240\u4e86\u89e3\u7684\u540c\u5b66\u90fd\u77e5\u9053\u5b83\u9ed8\u8ba4\u4f7f\u7528\u7684\u955c\u50cf\u5728\u56fd\u5185\u662f\u4e0d\u80fd\u8bbf\u95ee\u7684\uff0c\u6240\u4ee5\u4e00\u6837\u9700\u8981\u81ea\u884c\u89e3\u51b3\u7f51\u7edc\u95ee\u9898\u3002 \u5982\u679c\u4f60\u5b58\u5728\u4e0a\u9762\u8bf4\u7684\u7f51\u7edc\u95ee\u9898\uff0c\u6700\u597d\u914d\u7f6e\u4e00\u4e2a\u56fd\u5185\u7684\u52a0\u901f\u5668\u6216\u8005\u955c\u50cf\u6e90\u3002\u5982\u679c\u4f60\u8fd8\u4e0d\u77e5\u9053\u5982\u4f55\u914d\u7f6e\u52a0\u901f\u5668\u548c\u955c\u50cf\u6e90\u53ef\u4ee5\u53c2\u8003\uff1a\u300c Docker / Kubernetes \u955c\u50cf\u6e90\u4e0d\u53ef\u7528\uff0c\u6559\u4f60\u51e0\u62db\u641e\u5b9a\u5b83\uff01 \u300d\u548c \u300c Docker \u4e0b\u4f7f\u7528 DaoCloud / \u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f \u300d\u4e24\u7bc7\u6587\u7ae0\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6839\u636e\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u8f93\u51fa\u7684\u63d0\u793a\u4fe1\u606f\u8fdb\u884c\u64cd\u4f5c\u6765\u9a8c\u8bc1\u4e00\u4e0b\u96c6\u7fa4\u662f\u5426\u90e8\u7f72\u6210\u529f\u3002 # \u83b7\u53d6\u6307\u5b9a\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84 $ export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster\")\" $ kubectl cluster-info Kubernetes master is running at https://localhost:34458 KubeDNS is running at https://localhost:34458/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'. $ kubectl get nodes NAME STATUS ROLES AGE VERSION my-cluster-control-plane Ready master 2m v1.15.3 $ kubectl get po -n kube-system NAME READY STATUS RESTARTS AGE coredns-86c58d9df4-6g66f 1/1 Running 0 21m coredns-86c58d9df4-pqcc4 1/1 Running 0 21m etcd-my-cluster-control-plane 1/1 Running 0 20m kube-apiserver-my-cluster-control-plane 1/1 Running 0 20m kube-controller-manager-my-cluster-control-plane 1/1 Running 0 20m kube-proxy-cjgnt 1/1 Running 0 21m kube-scheduler-my-cluster-control-plane 1/1 Running 0 21m weave-net-ls2v8 2/2 Running 1 21m \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u5230\u5355\u8282\u70b9\u7684 Kubernetes \u5df2\u7ecf\u642d\u5efa\u6210\u529f\u3002\u5355\u8282\u70b9\u96c6\u7fa4\u9ed8\u8ba4\u65b9\u5f0f\u542f\u52a8\u7684\u8282\u70b9\u7c7b\u578b\u662f control-plane \uff0c\u8be5\u8282\u70b9\u5305\u542b\u4e86\u6240\u6709\u7684\u7ec4\u4ef6\u3002\u8fd9\u4e9b\u7ec4\u4ef6\u5206\u522b\u662f\uff1a 2*Coredns \u3001 Etcd \u3001 Api-Server \u3001 Controller-Manager \u3001 Kube-Proxy \u3001 Sheduler \u548c\u7f51\u7edc\u63d2\u4ef6 Weave \uff0c\u76ee\u524d\u9ed8\u8ba4\u4f7f\u7528\u7684\u7f51\u7edc\u63d2\u4ef6\u4e5f\u662f Weave \u3002 \u521b\u5efa\u591a\u8282\u70b9\u7684\u96c6\u7fa4 \u9ed8\u8ba4\u5b89\u88c5\u7684\u96c6\u7fa4\u53ea\u90e8\u7f72\u4e86\u4e00\u4e2a\u63a7\u5236\u8282\u70b9\uff0c\u5982\u679c\u9700\u8981\u90e8\u7f72\u591a\u8282\u70b9\u96c6\u7fa4\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u7684\u65b9\u5f0f\u6765\u521b\u5efa\u591a\u4e2a\u5bb9\u5668\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u8fbe\u5230\u6a21\u62df\u591a\u4e2a\u8282\u70b9\u76ee\u7684\uff0c\u5e76\u4ee5\u8fd9\u4e9b\u8282\u70b9\u6765\u6784\u5efa\u4e00\u4e2a\u591a\u8282\u70b9\u7684 Kubernetes \u96c6\u7fa4\u3002 \u521b\u5efa\u591a\u8282\u70b9 Kubernetes \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 Kind \u5728\u521b\u5efa\u96c6\u7fa4\u7684\u65f6\u5019\uff0c\u652f\u6301\u901a\u8fc7 --config \u53c2\u6570\u4f20\u9012\u914d\u7f6e\u6587\u4ef6\u7ed9 Kind \uff0c\u914d\u7f6e\u6587\u4ef6\u53ef\u4fee\u6539\u7684\u5185\u5bb9\u4e3b\u8981\u6709 role \u548c \u8282\u70b9\u4f7f\u7528\u7684\u955c\u50cf\u3002 $ vim my-cluster-multi-node.yaml # \u4e00\u5171\u4e24\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2a\u4e3b\u8282\u70b9\uff0c\u4e00\u4e2a\u4ece\u8282\u70b9\u3002 kind: Cluster apiVersion: kind.sigs.k8s.io/v1alpha3 nodes: - role: control-plane - role: worker \u521b\u5efa\u591a\u8282\u70b9 Kubernetes \u96c6\u7fa4 \u914d\u7f6e\u6587\u4ef6\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5b8c\u6210\u591a\u8282\u70b9 Kubernetes \u96c6\u7fa4\u642d\u5efa\u3002 $ kind create cluster --config my-cluster-multi-node.yaml --name my-cluster-multi-node Creating cluster \"my-cluster-multi-node\" ... \u2713 Ensuring node image (kindest/node:v1.15.3) ? \u2713 Preparing nodes ?? \u2713 Creating kubeadm config ? \u2713 Starting control-plane ?\ufe0f \u2713 Joining worker nodes ? Cluster creation complete. You can now use the cluster with: export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster-multi-node\")\" kubectl cluster-info \u548c\u4e0a\u9762\u521b\u5efa\u7684\u5355\u8282\u70b9\u96c6\u7fa4\u4e00\u6837\uff0c\u6211\u4eec\u540c\u6837\u6839\u636e\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u8f93\u51fa\u7684\u63d0\u793a\u4fe1\u606f\u8fdb\u884c\u64cd\u4f5c\u6765\u9a8c\u8bc1\u4e00\u4e0b\u96c6\u7fa4\u662f\u5426\u90e8\u7f72\u6210\u529f\u3002 $ kubectl get nodes NAME STATUS ROLES AGE VERSION my-cluster-multi-node-control-plane Ready master 3m20s v1.15.3 my-cluster-multi-node-worker Ready <none> 3m8s v1.15.3 $ kubectl get po -n kube-system NAME READY STATUS RESTARTS AGE coredns-86c58d9df4-cnqhc 1/1 Running 0 5m29s coredns-86c58d9df4-hn9mv 1/1 Running 0 5m29s etcd-my-cluster-multi-node-control-plane 1/1 Running 0 4m24s kube-apiserver-my-cluster-multi-node-control-plane 1/1 Running 0 4m17s kube-controller-manager-my-cluster-multi-node-control-plane 1/1 Running 0 4m21s kube-proxy-8t4xt 1/1 Running 0 5m27s kube-proxy-skd5v 1/1 Running 0 5m29s kube-scheduler-my-cluster-multi-node-control-plane 1/1 Running 0 4m18s weave-net-nmfq2 2/2 Running 1 5m27s weave-net-srdfw 2/2 Running 0 5m29s \u521b\u5efa\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4 Kind \u4e5f\u652f\u6301\u642d\u5efa\u9ad8\u53ef\u7528\u7684 Kubernetes \u96c6\u7fa4\uff0c\u521b\u5efa\u65b9\u5f0f\u548c\u591a\u8282\u70b9\u96c6\u7fa4\u7c7b\u4f3c\uff0c\u4e5f\u662f\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u6765\u5b9e\u73b0\u3002 \u521b\u5efa\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 $ vim my-cluster-ha.yaml # \u4e00\u5171\u516d\u4e2a\u8282\u70b9\uff0c\u4e09\u4e2a control-plane \u8282\u70b9\uff0c\u4e09\u4e2a workers \u8282\u70b9 kind: Cluster apiVersion: kind.sigs.k8s.io/v1alpha3 kubeadmConfigPatches: - | apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration metadata: name: config networking: serviceSubnet: 10.0.0.0/16 imageRepository: registry.aliyuncs.com/google_containers nodeRegistration: kubeletExtraArgs: pod-infra-container-image: registry.aliyuncs.com/google_containers/pause:3.1 - | apiVersion: kubeadm.k8s.io/v1beta2 kind: InitConfiguration metadata: name: config networking: serviceSubnet: 10.0.0.0/16 imageRepository: registry.aliyuncs.com/google_containers nodes: - role: control-plane - role: control-plane - role: control-plane - role: worker - role: worker - role: worker \u8fd9\u91cc\uff0c\u6211\u4eec\u901a\u8fc7\u76f4\u63a5\u5728\u914d\u7f6e\u6587\u4ef6\u91cc\u4f7f\u7528\u56fd\u5185\u5bb9\u5668\u955c\u50cf\u6e90\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u5b98\u65b9\u5bb9\u5668\u955c\u50cf\u6e90\u4e0d\u53ef\u7528\u7684\u95ee\u9898\uff0c\u540c\u65f6\u4e5f\u8fbe\u5230\u4e86\u52a0\u901f\u96c6\u7fa4\u521b\u5efa\u7684\u76ee\u7684\u3002 \u521b\u5efa\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4 \u914d\u7f6e\u6587\u4ef6\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5b8c\u6210\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4\u642d\u5efa\u3002 $ kind create cluster --name my-cluster-ha --config my-cluster-ha.yaml Creating cluster \"my-cluster-ha\" ... \u2713 Ensuring node image (kindest/node:v1.15.3) ? \u2713 Preparing nodes ??????? \u2713 Starting the external load balancer \u2696\ufe0f \u2713 Creating kubeadm config ? \u2713 Starting control-plane ?\ufe0f \u2713 Joining more control-plane nodes ? \u2713 Joining worker nodes ? Cluster creation complete. You can now use the cluster with: export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster-ha\")\" kubectl cluster-info master $ export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster-ha\")\" master $ kubectl cluster-info Kubernetes master is running at https://localhost:44019 KubeDNS is running at https://localhost:44019/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'. \u540c\u6837\uff0c\u6211\u4eec\u6839\u636e\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u8f93\u51fa\u7684\u63d0\u793a\u4fe1\u606f\u8fdb\u884c\u64cd\u4f5c\u6765\u9a8c\u8bc1\u4e00\u4e0b\u96c6\u7fa4\u662f\u5426\u90e8\u7f72\u6210\u529f\u3002 $ kubectl get nodes NAME STATUS ROLES AGE VERSION my-cluster-ha-control-plane Ready master 3m42s v1.15.3 my-cluster-ha-control-plane2 Ready master 3m24s v1.15.3 my-cluster-ha-control-plane3 Ready master 2m13s v1.15.3 my-cluster-ha-worker Ready <none> 96s v1.15.3 my-cluster-ha-worker2 Ready <none> 98s v1.15.3 my-cluster-ha-worker3 Ready <none> 95s v1.15.3 \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u5230\u5305\u542b\u4e86\u591a\u4e2a master \u8282\u70b9\uff0c\u8bf4\u660e\u9ad8\u53ef\u7528\u7684 Kubernetes \u96c6\u7fa4\u5df2\u7ecf\u642d\u5efa\u6210\u529f\u3002 \u5176\u5b83\u76f8\u5173\u77e5\u8bc6 Kind \u7684\u955c\u50cf\u91cc\u7684\u79d8\u5bc6 Kind \u955c\u50cf\u4e00\u5171\u5206\u4e3a\u4e24\u7c7b\uff0c\u4e00\u7c7b\u662f Base \u955c\u50cf\uff0c\u53e6\u4e00\u7c7b\u662f Node \u955c\u50cf\u3002 Base \u955c\u50cf Base \u955c\u50cf\u76ee\u524d\u4f7f\u7528\u4e86 ubuntu:19.04 \u4f5c\u4e3a\u57fa\u7840\u955c\u50cf\uff0c\u5e76\u505a\u4e86\u4e0b\u9762\u7684\u8c03\u6574\uff1a \u5b89\u88c5 Systemd \u76f8\u5173\u7684\u5305\uff0c\u5e76\u8c03\u6574\u4e00\u4e9b\u914d\u7f6e\u4ee5\u9002\u5e94\u5728\u5bb9\u5668\u5185\u8fd0\u884c\u3002 \u5b89\u88c5 Kubernetes \u8fd0\u884c\u65f6\u7684\u4f9d\u8d56\u5305\uff0c\u6bd4\u5982: Conntrack \u3001 Socat \u3001 CNI \u7b49\u3002 \u5b89\u88c5\u5bb9\u5668\u8fd0\u884c\u73af\u5883\uff0c\u6bd4\u5982: Containerd \u3001 Crictl \u7b49\u3002 \u914d\u7f6e\u81ea\u5df1\u7684 ENTRYPOINT \u811a\u672c\uff0c\u4ee5\u9002\u5e94\u548c\u8c03\u6574\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u95ee\u9898\u3002 \u66f4\u591a\u5177\u4f53\u7684\u6784\u5efa\u903b\u8f91\u53ef\u4ee5\u53c2\u8003\uff1ahttps://github.com/kubernetes-sigs/kind/blob/master/images/base/Dockerfile Node \u955c\u50cf Node \u955c\u50cf\u7684\u6784\u5efa\u6bd4\u8f83\u590d\u6742\uff0c\u76ee\u524d\u662f\u901a\u8fc7\u8fd0\u884c Base \u955c\u50cf\u5e76\u5728 Base \u955c\u50cf\u5185\u6267\u884c\u64cd\u4f5c\uff0c\u518d\u4fdd\u5b58\u6b64\u5bb9\u5668\u5185\u5bb9\u4e3a\u955c\u50cf\u7684\u65b9\u5f0f\u6765\u6784\u5efa\u7684\uff0c\u5305\u542b\u7684\u64cd\u4f5c\u6709\uff1a \u6784\u5efa Kubernetes \u76f8\u5173\u8d44\u6e90\uff0c\u6bd4\u5982\uff1a\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u955c\u50cf\u3002 \u8fd0\u884c\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u7684\u5bb9\u5668 \u628a\u6784\u5efa\u7684 Kubernetes \u76f8\u5173\u8d44\u6e90\u590d\u5236\u5230\u5bb9\u5668\u91cc \u8c03\u6574\u90e8\u5206\u7ec4\u4ef6\u914d\u7f6e\u53c2\u6570\uff0c\u4ee5\u652f\u6301\u5728\u5bb9\u5668\u5185\u8fd0\u884c \u9884\u5148\u62c9\u53bb\u8fd0\u884c\u73af\u5883\u9700\u8981\u7684\u955c\u50cf \u901a\u8fc7 docker commit \u65b9\u5f0f\u4fdd\u5b58\u5f53\u524d\u7684\u6784\u5efa\u5bb9\u5668\u4e3a Node \u955c\u50cf \u5982\u4f55\u5feb\u901f\u5220\u9664\u4e00\u4e2a\u96c6\u7fa4 \u5982\u679c\u4f60\u4e0d\u9700\u8981\u672c\u5730\u7684\u96c6\u7fa4\u73af\u5883\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u5220\u9664\uff1a $ kind delete cluster --name my-cluster Deleting cluster \"my-cluster\" ... $KUBECONFIG is still set to use /root/.kube/kind-config-my-cluster even though that file has been deleted, remember to unset it \u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u6f14\u793a\u5b8c\u4e86\u5982\u4f55\u4f7f\u7528 Kind \u5feb\u901f\u642d\u5efa\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u3002\u4e0d\u8fc7\u6709\u4e00\u4e2a\u4f60\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff0c Kind \u642d\u5efa\u7684\u96c6\u7fa4\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002\u4f46\u662f\u5982\u679c\u4f60\u60f3\u5728\u672c\u5730\u5feb\u901f\u6784\u5efa\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u73af\u5883\uff0c\u5e76\u4e14\u4e0d\u60f3\u5360\u7528\u592a\u591a\u7684\u786c\u4ef6\u8d44\u6e90\uff0c\u90a3\u4e48 Kind \u4f1a\u662f\u4f60\u4e0d\u9519\u7684\u9009\u62e9\u3002 \u53c2\u8003\u6587\u6863 https://www.google.com http://t.cn/AiRVBwDS https://zhuanlan.zhihu.com/p/60464867 https://yeya24.github.io/post/kind/ http://dockerone.com/article/8974 https://kind.sigs.k8s.io/docs/user/quick-start/","title":"\u4f7f\u7528 Kind \u5728 5 \u5206\u949f\u5185\u5feb\u901f\u90e8\u7f72\u4e00\u4e2a Kubernetes \u9ad8\u53ef\u7528\u96c6\u7fa4"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#kind","text":"","title":"\u5b89\u88c5 Kind"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#kind_1","text":"Kind \u628a\u90e8\u7f72 Kubernetes \u73af\u5883\u7684\u4f9d\u8d56\u964d\u4f4e\u5230\u4e86\u6700\u5c0f\uff0c\u4ec5\u9700\u8981\u673a\u5668\u5b89\u88c5 Docker \u5373\u53ef\u3002 \u5b89\u88c5 Docker \u8fd9\u91cc\u4ee5 Linux \u7cfb\u7edf\u4e3a\u4f8b\uff1a $ curl -sSL https://get.daocloud.io/docker | sh \u66f4\u591a\u5e73\u53f0\u7684\u5b89\u88c5\u65b9\u6cd5\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1ahttps://docs.docker.com/install/ \u5b89\u88c5 Kubectl \u5982\u679c\u4f60\u9700\u8981\u901a\u8fc7\u547d\u4ee4\u884c\u7ba1\u7406\u96c6\u7fa4\uff0c\u5219\u9700\u8981\u5b89\u88c5 Kubectl \u3002 \u8fd9\u91cc\u4ee5 Linux \u7cfb\u7edf\u4e3a\u4f8b\uff1a $ curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.15.0/bin/linux/amd64/kubectl $ chmod +x ./kubectl $ sudo mv ./kubectl /usr/local/bin/kubectl \u66f4\u591a\u5e73\u53f0\u7684\u5b89\u88c5\u65b9\u6cd5\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1ahttps://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl","title":"\u5b89\u88c5 Kind \u4f9d\u8d56\u7ec4\u4ef6"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#kind_2","text":"Kind \u4f7f\u7528 Golang \u8fdb\u884c\u5f00\u53d1\uff0c\u539f\u751f\u652f\u6301\u826f\u597d\u7684\u8de8\u5e73\u53f0\u7279\u6027\uff0c\u901a\u5e38\u53ea\u9700\u8981\u76f4\u63a5\u4e0b\u8f7d\u6784\u5efa\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5c31\u53ef\u4f7f\u7528\u3002 \u901a\u8fc7\u4e8c\u8fdb\u5236\u5b89\u88c5 Linux $ curl -Lo ./kind https://github.com/kubernetes-sigs/kind/releases/download/v0.5.1/kind-linux-amd64 $ chmod +x ./kind $ mv ./kind /usr/local/bin/kind Windows $ curl.exe -Lo kind-windows-amd64.exe https://github.com/kubernetes-sigs/kind/releases/download/v0.5.1/kind-windows-amd64 $ mv .\\kind-windows-amd64.exe c:\\kind.exe \u66f4\u591a\u5e73\u53f0\u7684\u5b89\u88c5\u65b9\u6cd5\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1ahttps://kind.sigs.k8s.io/docs/user/quick-start/ \u901a\u8fc7\u6e90\u7801\u5b89\u88c5 \u5982\u679c\u672c\u5730\u73af\u5883\u5df2\u7ecf\u914d\u7f6e\u597d Golang (1.11+) \u7684\u5f00\u53d1\u73af\u5883\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u6e90\u7801\u8fdb\u884c\u5b89\u88c5\u3002 $ go get sigs.k8s.io/kind@v0.5.1 \u8fd0\u884c\u5b8c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u4f1a\u5c06 Kind \u7684\u53ef\u6267\u884c\u6587\u4ef6\u653e\u5230 $GOPATH/bin \u76ee\u5f55\u5185\u3002\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528\uff0c\u4f60\u9700\u8981\u5c06\u6b64\u76ee\u5f55\u52a0\u5165\u5230 $PATH \u4e2d\u3002","title":"\u5b89\u88c5 Kind"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#kind_3","text":"\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6765\u770b\u770b Kind \u652f\u6301\u54ea\u4e9b\u547d\u4ee4\u884c\u64cd\u4f5c\u3002 $ kind kind creates and manages local Kubernetes clusters using Docker container 'nodes' Usage: kind [command] Available Commands: build Build one of [base-image, node-image] create Creates one of [cluster] delete Deletes one of [cluster] export exports one of [logs] get Gets one of [clusters, nodes, kubeconfig-path] help Help about any command load Loads images into nodes version prints the kind CLI version Flags: -h, --help help for kind --loglevel string logrus log level [panic, fatal, error, warning, info, debug] (default \"warning\") --version version for kind Use \"kind [command] --help\" for more information about a command. \u7b80\u5355\u8bf4\u4e0b\u51e0\u4e2a\u6bd4\u8f83\u5e38\u7528\u9009\u9879\u7684\u542b\u4e49\uff1a build \uff1a\u7528\u6765\u4ece Kubernetes \u6e90\u4ee3\u7801\u6784\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\u3002 create \uff1a\u521b\u5efa\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u3002 delete \uff1a\u5220\u9664\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u3002 get \uff1a\u53ef\u7528\u6765\u67e5\u770b\u5f53\u524d\u96c6\u7fa4\u3001\u8282\u70b9\u4fe1\u606f\u4ee5\u53ca Kubectl \u914d\u7f6e\u6587\u4ef6\u7684\u5730\u5740\u3002 load \uff1a\u4ece \u5bbf\u4e3b\u673a \u5411 Kubernetes \u8282\u70b9\u5185\u5bfc\u5165\u955c\u50cf\u3002","title":"\u4f7f\u7528 Kind"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#kind-kubernetes","text":"","title":"\u4f7f\u7528 Kind \u521b\u5efa Kubernetes \u96c6\u7fa4"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#_1","text":"\u642d\u5efa\u5355\u8282\u70b9\u96c6\u7fa4\u662f Kind \u6700\u57fa\u7840\u7684\u529f\u80fd\uff0c\u5f53\u7136\u4f7f\u7528\u8d77\u6765\u4e5f\u5f88\u7b80\u5355\uff0c\u4ec5\u9700\u4e00\u6761\u6307\u4ee4\u5373\u53ef\u5b8c\u6210\u3002 $ kind create cluster --name my-cluster Creating cluster \"my-cluster\" ... \u2713 Ensuring node image (kindest/node:v1.15.3) ? \u2713 Preparing nodes ? \u2713 Creating kubeadm config ? \u2713 Starting control-plane ?\ufe0f Cluster creation complete. You can now use the cluster with: export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster\")\" kubectl cluster-info \u4ee5\u4e0a\u547d\u4ee4\u4e2d --name \u662f\u53ef\u9009\u53c2\u6570\u3002\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u9ed8\u8ba4\u521b\u5efa\u51fa\u6765\u7684\u96c6\u7fa4\u540d\u5b57\u4e3a kind \u3002 \u4f7f\u7528\u9ed8\u8ba4\u5b89\u88c5\u7684\u65b9\u5f0f\u65f6\uff0c\u6211\u4eec\u6ca1\u6709\u6307\u5b9a\u4efb\u4f55\u914d\u7f6e\u6587\u4ef6\u3002\u4ece\u5b89\u88c5\u8fc7\u7a0b\u7684\u8f93\u51fa\u6765\u770b\uff0c\u4e00\u5171\u5206\u4e3a 4 \u6b65\uff1a \u68c0\u67e5\u672c\u5730\u73af\u5883\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u57fa\u7840\u7684\u5b89\u88c5\u955c\u50cf\uff0c\u9ed8\u8ba4\u662f kindest/node:v1.15.3 \uff0c\u8be5\u955c\u50cf\u91cc\u9762\u5305\u542b\u4e86\u6240\u6709\u9700\u8981\u5b89\u88c5\u7684\u4e1c\u897f\uff0c\u5305\u62ec\uff1a kubectl \u3001 kubeadm \u3001 kubelet \u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4ee5\u53ca\u5b89\u88c5\u5bf9\u5e94\u7248\u672c Kubernetes \u6240\u9700\u8981\u7684\u955c\u50cf\u3002 \u51c6\u5907 Kubernetes \u8282\u70b9\uff0c\u4e3b\u8981\u5c31\u662f\u542f\u52a8\u5bb9\u5668\u3001\u89e3\u538b\u955c\u50cf\u8fd9\u7c7b\u7684\u64cd\u4f5c\u3002 \u5efa\u7acb\u5bf9\u5e94\u7684 kubeadm \u7684\u914d\u7f6e\uff0c\u5b8c\u6210\u4e4b\u540e\u5c31\u901a\u8fc7 kubeadm \u8fdb\u884c\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u540e\u8fd8\u4f1a\u505a\u4e00\u4e9b\u6e05\u7406\u64cd\u4f5c\uff0c\u6bd4\u5982\uff1a\u5220\u6389\u4e3b\u8282\u70b9\u4e0a\u7684\u6c61\u70b9\uff0c\u5426\u5219\u5bf9\u4e8e\u6ca1\u6709\u5bb9\u5fcd\u7684 Pod \u65e0\u6cd5\u5b8c\u6210\u90e8\u7f72\u3002 \u4e0a\u9762\u6240\u6709\u64cd\u4f5c\u90fd\u5b8c\u6210\u540e\uff0c\u5c31\u6210\u529f\u542f\u52a8\u4e86\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u5e76\u8f93\u51fa\u4e00\u4e9b\u64cd\u4f5c\u96c6\u7fa4\u7684\u63d0\u793a\u4fe1\u606f\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c Kind \u4f1a\u5148\u4e0b\u8f7d kindest/node:v1.15.3 \u955c\u50cf\u3002\u5982\u679c\u4f60\u60f3\u6307\u5b9a\u4e0d\u540c\u7248\u672c\uff0c\u53ef\u4ee5\u4f7f\u7528 --image \u53c2\u6570\uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a kind create cluster --image kindest/node:v1.15.3 kindest/node \u8fd9\u4e2a\u955c\u50cf\u76ee\u524d\u6258\u7ba1\u4e8e Docker Hub \u4e0a\uff0c\u4e0b\u8f7d\u65f6\u53ef\u80fd\u4f1a\u8f83\u6162\u3002\u540c\u6837\u7684\u95ee\u9898 Kind \u8fdb\u884c\u96c6\u7fa4\u7684\u521b\u5efa\u4e5f\u662f\u5b58\u5728\u7684\uff0c Kind \u5b9e\u9645\u4f7f\u7528 Kubeadm \u8fdb\u884c\u96c6\u7fa4\u7684\u521b\u5efa\u3002\u5bf9 Kubeadm \u6709\u6240\u4e86\u89e3\u7684\u540c\u5b66\u90fd\u77e5\u9053\u5b83\u9ed8\u8ba4\u4f7f\u7528\u7684\u955c\u50cf\u5728\u56fd\u5185\u662f\u4e0d\u80fd\u8bbf\u95ee\u7684\uff0c\u6240\u4ee5\u4e00\u6837\u9700\u8981\u81ea\u884c\u89e3\u51b3\u7f51\u7edc\u95ee\u9898\u3002 \u5982\u679c\u4f60\u5b58\u5728\u4e0a\u9762\u8bf4\u7684\u7f51\u7edc\u95ee\u9898\uff0c\u6700\u597d\u914d\u7f6e\u4e00\u4e2a\u56fd\u5185\u7684\u52a0\u901f\u5668\u6216\u8005\u955c\u50cf\u6e90\u3002\u5982\u679c\u4f60\u8fd8\u4e0d\u77e5\u9053\u5982\u4f55\u914d\u7f6e\u52a0\u901f\u5668\u548c\u955c\u50cf\u6e90\u53ef\u4ee5\u53c2\u8003\uff1a\u300c Docker / Kubernetes \u955c\u50cf\u6e90\u4e0d\u53ef\u7528\uff0c\u6559\u4f60\u51e0\u62db\u641e\u5b9a\u5b83\uff01 \u300d\u548c \u300c Docker \u4e0b\u4f7f\u7528 DaoCloud / \u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f \u300d\u4e24\u7bc7\u6587\u7ae0\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6839\u636e\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u8f93\u51fa\u7684\u63d0\u793a\u4fe1\u606f\u8fdb\u884c\u64cd\u4f5c\u6765\u9a8c\u8bc1\u4e00\u4e0b\u96c6\u7fa4\u662f\u5426\u90e8\u7f72\u6210\u529f\u3002 # \u83b7\u53d6\u6307\u5b9a\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84 $ export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster\")\" $ kubectl cluster-info Kubernetes master is running at https://localhost:34458 KubeDNS is running at https://localhost:34458/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'. $ kubectl get nodes NAME STATUS ROLES AGE VERSION my-cluster-control-plane Ready master 2m v1.15.3 $ kubectl get po -n kube-system NAME READY STATUS RESTARTS AGE coredns-86c58d9df4-6g66f 1/1 Running 0 21m coredns-86c58d9df4-pqcc4 1/1 Running 0 21m etcd-my-cluster-control-plane 1/1 Running 0 20m kube-apiserver-my-cluster-control-plane 1/1 Running 0 20m kube-controller-manager-my-cluster-control-plane 1/1 Running 0 20m kube-proxy-cjgnt 1/1 Running 0 21m kube-scheduler-my-cluster-control-plane 1/1 Running 0 21m weave-net-ls2v8 2/2 Running 1 21m \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u5230\u5355\u8282\u70b9\u7684 Kubernetes \u5df2\u7ecf\u642d\u5efa\u6210\u529f\u3002\u5355\u8282\u70b9\u96c6\u7fa4\u9ed8\u8ba4\u65b9\u5f0f\u542f\u52a8\u7684\u8282\u70b9\u7c7b\u578b\u662f control-plane \uff0c\u8be5\u8282\u70b9\u5305\u542b\u4e86\u6240\u6709\u7684\u7ec4\u4ef6\u3002\u8fd9\u4e9b\u7ec4\u4ef6\u5206\u522b\u662f\uff1a 2*Coredns \u3001 Etcd \u3001 Api-Server \u3001 Controller-Manager \u3001 Kube-Proxy \u3001 Sheduler \u548c\u7f51\u7edc\u63d2\u4ef6 Weave \uff0c\u76ee\u524d\u9ed8\u8ba4\u4f7f\u7528\u7684\u7f51\u7edc\u63d2\u4ef6\u4e5f\u662f Weave \u3002","title":"\u642d\u5efa\u4e00\u4e2a\u5355\u8282\u70b9\u96c6\u7fa4"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#_2","text":"\u9ed8\u8ba4\u5b89\u88c5\u7684\u96c6\u7fa4\u53ea\u90e8\u7f72\u4e86\u4e00\u4e2a\u63a7\u5236\u8282\u70b9\uff0c\u5982\u679c\u9700\u8981\u90e8\u7f72\u591a\u8282\u70b9\u96c6\u7fa4\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u7684\u65b9\u5f0f\u6765\u521b\u5efa\u591a\u4e2a\u5bb9\u5668\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u8fbe\u5230\u6a21\u62df\u591a\u4e2a\u8282\u70b9\u76ee\u7684\uff0c\u5e76\u4ee5\u8fd9\u4e9b\u8282\u70b9\u6765\u6784\u5efa\u4e00\u4e2a\u591a\u8282\u70b9\u7684 Kubernetes \u96c6\u7fa4\u3002 \u521b\u5efa\u591a\u8282\u70b9 Kubernetes \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 Kind \u5728\u521b\u5efa\u96c6\u7fa4\u7684\u65f6\u5019\uff0c\u652f\u6301\u901a\u8fc7 --config \u53c2\u6570\u4f20\u9012\u914d\u7f6e\u6587\u4ef6\u7ed9 Kind \uff0c\u914d\u7f6e\u6587\u4ef6\u53ef\u4fee\u6539\u7684\u5185\u5bb9\u4e3b\u8981\u6709 role \u548c \u8282\u70b9\u4f7f\u7528\u7684\u955c\u50cf\u3002 $ vim my-cluster-multi-node.yaml # \u4e00\u5171\u4e24\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2a\u4e3b\u8282\u70b9\uff0c\u4e00\u4e2a\u4ece\u8282\u70b9\u3002 kind: Cluster apiVersion: kind.sigs.k8s.io/v1alpha3 nodes: - role: control-plane - role: worker \u521b\u5efa\u591a\u8282\u70b9 Kubernetes \u96c6\u7fa4 \u914d\u7f6e\u6587\u4ef6\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5b8c\u6210\u591a\u8282\u70b9 Kubernetes \u96c6\u7fa4\u642d\u5efa\u3002 $ kind create cluster --config my-cluster-multi-node.yaml --name my-cluster-multi-node Creating cluster \"my-cluster-multi-node\" ... \u2713 Ensuring node image (kindest/node:v1.15.3) ? \u2713 Preparing nodes ?? \u2713 Creating kubeadm config ? \u2713 Starting control-plane ?\ufe0f \u2713 Joining worker nodes ? Cluster creation complete. You can now use the cluster with: export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster-multi-node\")\" kubectl cluster-info \u548c\u4e0a\u9762\u521b\u5efa\u7684\u5355\u8282\u70b9\u96c6\u7fa4\u4e00\u6837\uff0c\u6211\u4eec\u540c\u6837\u6839\u636e\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u8f93\u51fa\u7684\u63d0\u793a\u4fe1\u606f\u8fdb\u884c\u64cd\u4f5c\u6765\u9a8c\u8bc1\u4e00\u4e0b\u96c6\u7fa4\u662f\u5426\u90e8\u7f72\u6210\u529f\u3002 $ kubectl get nodes NAME STATUS ROLES AGE VERSION my-cluster-multi-node-control-plane Ready master 3m20s v1.15.3 my-cluster-multi-node-worker Ready <none> 3m8s v1.15.3 $ kubectl get po -n kube-system NAME READY STATUS RESTARTS AGE coredns-86c58d9df4-cnqhc 1/1 Running 0 5m29s coredns-86c58d9df4-hn9mv 1/1 Running 0 5m29s etcd-my-cluster-multi-node-control-plane 1/1 Running 0 4m24s kube-apiserver-my-cluster-multi-node-control-plane 1/1 Running 0 4m17s kube-controller-manager-my-cluster-multi-node-control-plane 1/1 Running 0 4m21s kube-proxy-8t4xt 1/1 Running 0 5m27s kube-proxy-skd5v 1/1 Running 0 5m29s kube-scheduler-my-cluster-multi-node-control-plane 1/1 Running 0 4m18s weave-net-nmfq2 2/2 Running 1 5m27s weave-net-srdfw 2/2 Running 0 5m29s","title":"\u521b\u5efa\u591a\u8282\u70b9\u7684\u96c6\u7fa4"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#kubernetes","text":"Kind \u4e5f\u652f\u6301\u642d\u5efa\u9ad8\u53ef\u7528\u7684 Kubernetes \u96c6\u7fa4\uff0c\u521b\u5efa\u65b9\u5f0f\u548c\u591a\u8282\u70b9\u96c6\u7fa4\u7c7b\u4f3c\uff0c\u4e5f\u662f\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u6765\u5b9e\u73b0\u3002 \u521b\u5efa\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 $ vim my-cluster-ha.yaml # \u4e00\u5171\u516d\u4e2a\u8282\u70b9\uff0c\u4e09\u4e2a control-plane \u8282\u70b9\uff0c\u4e09\u4e2a workers \u8282\u70b9 kind: Cluster apiVersion: kind.sigs.k8s.io/v1alpha3 kubeadmConfigPatches: - | apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration metadata: name: config networking: serviceSubnet: 10.0.0.0/16 imageRepository: registry.aliyuncs.com/google_containers nodeRegistration: kubeletExtraArgs: pod-infra-container-image: registry.aliyuncs.com/google_containers/pause:3.1 - | apiVersion: kubeadm.k8s.io/v1beta2 kind: InitConfiguration metadata: name: config networking: serviceSubnet: 10.0.0.0/16 imageRepository: registry.aliyuncs.com/google_containers nodes: - role: control-plane - role: control-plane - role: control-plane - role: worker - role: worker - role: worker \u8fd9\u91cc\uff0c\u6211\u4eec\u901a\u8fc7\u76f4\u63a5\u5728\u914d\u7f6e\u6587\u4ef6\u91cc\u4f7f\u7528\u56fd\u5185\u5bb9\u5668\u955c\u50cf\u6e90\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u5b98\u65b9\u5bb9\u5668\u955c\u50cf\u6e90\u4e0d\u53ef\u7528\u7684\u95ee\u9898\uff0c\u540c\u65f6\u4e5f\u8fbe\u5230\u4e86\u52a0\u901f\u96c6\u7fa4\u521b\u5efa\u7684\u76ee\u7684\u3002 \u521b\u5efa\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4 \u914d\u7f6e\u6587\u4ef6\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5b8c\u6210\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4\u642d\u5efa\u3002 $ kind create cluster --name my-cluster-ha --config my-cluster-ha.yaml Creating cluster \"my-cluster-ha\" ... \u2713 Ensuring node image (kindest/node:v1.15.3) ? \u2713 Preparing nodes ??????? \u2713 Starting the external load balancer \u2696\ufe0f \u2713 Creating kubeadm config ? \u2713 Starting control-plane ?\ufe0f \u2713 Joining more control-plane nodes ? \u2713 Joining worker nodes ? Cluster creation complete. You can now use the cluster with: export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster-ha\")\" kubectl cluster-info master $ export KUBECONFIG=\"$(kind get kubeconfig-path --name=\"my-cluster-ha\")\" master $ kubectl cluster-info Kubernetes master is running at https://localhost:44019 KubeDNS is running at https://localhost:44019/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'. \u540c\u6837\uff0c\u6211\u4eec\u6839\u636e\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u8f93\u51fa\u7684\u63d0\u793a\u4fe1\u606f\u8fdb\u884c\u64cd\u4f5c\u6765\u9a8c\u8bc1\u4e00\u4e0b\u96c6\u7fa4\u662f\u5426\u90e8\u7f72\u6210\u529f\u3002 $ kubectl get nodes NAME STATUS ROLES AGE VERSION my-cluster-ha-control-plane Ready master 3m42s v1.15.3 my-cluster-ha-control-plane2 Ready master 3m24s v1.15.3 my-cluster-ha-control-plane3 Ready master 2m13s v1.15.3 my-cluster-ha-worker Ready <none> 96s v1.15.3 my-cluster-ha-worker2 Ready <none> 98s v1.15.3 my-cluster-ha-worker3 Ready <none> 95s v1.15.3 \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u5230\u5305\u542b\u4e86\u591a\u4e2a master \u8282\u70b9\uff0c\u8bf4\u660e\u9ad8\u53ef\u7528\u7684 Kubernetes \u96c6\u7fa4\u5df2\u7ecf\u642d\u5efa\u6210\u529f\u3002","title":"\u521b\u5efa\u9ad8\u53ef\u7528 Kubernetes \u96c6\u7fa4"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#_3","text":"","title":"\u5176\u5b83\u76f8\u5173\u77e5\u8bc6"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#kind_4","text":"Kind \u955c\u50cf\u4e00\u5171\u5206\u4e3a\u4e24\u7c7b\uff0c\u4e00\u7c7b\u662f Base \u955c\u50cf\uff0c\u53e6\u4e00\u7c7b\u662f Node \u955c\u50cf\u3002 Base \u955c\u50cf Base \u955c\u50cf\u76ee\u524d\u4f7f\u7528\u4e86 ubuntu:19.04 \u4f5c\u4e3a\u57fa\u7840\u955c\u50cf\uff0c\u5e76\u505a\u4e86\u4e0b\u9762\u7684\u8c03\u6574\uff1a \u5b89\u88c5 Systemd \u76f8\u5173\u7684\u5305\uff0c\u5e76\u8c03\u6574\u4e00\u4e9b\u914d\u7f6e\u4ee5\u9002\u5e94\u5728\u5bb9\u5668\u5185\u8fd0\u884c\u3002 \u5b89\u88c5 Kubernetes \u8fd0\u884c\u65f6\u7684\u4f9d\u8d56\u5305\uff0c\u6bd4\u5982: Conntrack \u3001 Socat \u3001 CNI \u7b49\u3002 \u5b89\u88c5\u5bb9\u5668\u8fd0\u884c\u73af\u5883\uff0c\u6bd4\u5982: Containerd \u3001 Crictl \u7b49\u3002 \u914d\u7f6e\u81ea\u5df1\u7684 ENTRYPOINT \u811a\u672c\uff0c\u4ee5\u9002\u5e94\u548c\u8c03\u6574\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u95ee\u9898\u3002 \u66f4\u591a\u5177\u4f53\u7684\u6784\u5efa\u903b\u8f91\u53ef\u4ee5\u53c2\u8003\uff1ahttps://github.com/kubernetes-sigs/kind/blob/master/images/base/Dockerfile Node \u955c\u50cf Node \u955c\u50cf\u7684\u6784\u5efa\u6bd4\u8f83\u590d\u6742\uff0c\u76ee\u524d\u662f\u901a\u8fc7\u8fd0\u884c Base \u955c\u50cf\u5e76\u5728 Base \u955c\u50cf\u5185\u6267\u884c\u64cd\u4f5c\uff0c\u518d\u4fdd\u5b58\u6b64\u5bb9\u5668\u5185\u5bb9\u4e3a\u955c\u50cf\u7684\u65b9\u5f0f\u6765\u6784\u5efa\u7684\uff0c\u5305\u542b\u7684\u64cd\u4f5c\u6709\uff1a \u6784\u5efa Kubernetes \u76f8\u5173\u8d44\u6e90\uff0c\u6bd4\u5982\uff1a\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u955c\u50cf\u3002 \u8fd0\u884c\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u7684\u5bb9\u5668 \u628a\u6784\u5efa\u7684 Kubernetes \u76f8\u5173\u8d44\u6e90\u590d\u5236\u5230\u5bb9\u5668\u91cc \u8c03\u6574\u90e8\u5206\u7ec4\u4ef6\u914d\u7f6e\u53c2\u6570\uff0c\u4ee5\u652f\u6301\u5728\u5bb9\u5668\u5185\u8fd0\u884c \u9884\u5148\u62c9\u53bb\u8fd0\u884c\u73af\u5883\u9700\u8981\u7684\u955c\u50cf \u901a\u8fc7 docker commit \u65b9\u5f0f\u4fdd\u5b58\u5f53\u524d\u7684\u6784\u5efa\u5bb9\u5668\u4e3a Node \u955c\u50cf","title":"Kind \u7684\u955c\u50cf\u91cc\u7684\u79d8\u5bc6"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#_4","text":"\u5982\u679c\u4f60\u4e0d\u9700\u8981\u672c\u5730\u7684\u96c6\u7fa4\u73af\u5883\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u5220\u9664\uff1a $ kind delete cluster --name my-cluster Deleting cluster \"my-cluster\" ... $KUBECONFIG is still set to use /root/.kube/kind-config-my-cluster even though that file has been deleted, remember to unset it \u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u6f14\u793a\u5b8c\u4e86\u5982\u4f55\u4f7f\u7528 Kind \u5feb\u901f\u642d\u5efa\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u3002\u4e0d\u8fc7\u6709\u4e00\u4e2a\u4f60\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff0c Kind \u642d\u5efa\u7684\u96c6\u7fa4\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002\u4f46\u662f\u5982\u679c\u4f60\u60f3\u5728\u672c\u5730\u5feb\u901f\u6784\u5efa\u4e00\u4e2a Kubernetes \u96c6\u7fa4\u73af\u5883\uff0c\u5e76\u4e14\u4e0d\u60f3\u5360\u7528\u592a\u591a\u7684\u786c\u4ef6\u8d44\u6e90\uff0c\u90a3\u4e48 Kind \u4f1a\u662f\u4f60\u4e0d\u9519\u7684\u9009\u62e9\u3002","title":"\u5982\u4f55\u5feb\u901f\u5220\u9664\u4e00\u4e2a\u96c6\u7fa4"},{"location":"%E6%8A%80%E6%9C%AF/%E4%BD%BF%E7%94%A8%20Kind%20%E5%9C%A8%205%20%E5%88%86%E9%92%9F%E5%86%85%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%20Kubernetes%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/#_5","text":"https://www.google.com http://t.cn/AiRVBwDS https://zhuanlan.zhihu.com/p/60464867 https://yeya24.github.io/post/kind/ http://dockerone.com/article/8974 https://kind.sigs.k8s.io/docs/user/quick-start/","title":"\u53c2\u8003\u6587\u6863"},{"location":"%E6%95%85%E9%9A%9C/docker%E6%95%85%E9%9A%9C/","text":"docker\u6545\u969c","title":"docker\u6545\u969c"},{"location":"%E6%95%85%E9%9A%9C/docker%E6%95%85%E9%9A%9C/#docker","text":"","title":"docker\u6545\u969c"},{"location":"%E6%95%85%E9%9A%9C/kubernetes%E6%95%85%E9%9A%9C/","text":"kubernetes\u6545\u969c","title":"kubernetes\u6545\u969c"},{"location":"%E6%95%85%E9%9A%9C/kubernetes%E6%95%85%E9%9A%9C/#kubernetes","text":"","title":"kubernetes\u6545\u969c"},{"location":"%E7%9B%91%E6%8E%A7/efk/","text":"efk.md","title":"efk.md"},{"location":"%E7%9B%91%E6%8E%A7/efk/#efkmd","text":"","title":"efk.md"},{"location":"%E7%9B%91%E6%8E%A7/grafana/","text":"grafana.md","title":"grafana.md"},{"location":"%E7%9B%91%E6%8E%A7/grafana/#grafanamd","text":"","title":"grafana.md"},{"location":"%E7%9B%91%E6%8E%A7/prometheus/","text":"Prometheus \u76d1\u63a7 \u8fd9\u91cc\u662f\u5173\u4e8e Prometheus \u76d1\u63a7\u7cfb\u7edf\u7684\u5185\u5bb9\u3002 \u5b89\u88c5\u4e0e\u914d\u7f6e \u6307\u6807\u6536\u96c6 \u544a\u8b66\u89c4\u5219","title":"Prometheus \u76d1\u63a7"},{"location":"%E7%9B%91%E6%8E%A7/prometheus/#prometheus","text":"\u8fd9\u91cc\u662f\u5173\u4e8e Prometheus \u76d1\u63a7\u7cfb\u7edf\u7684\u5185\u5bb9\u3002 \u5b89\u88c5\u4e0e\u914d\u7f6e \u6307\u6807\u6536\u96c6 \u544a\u8b66\u89c4\u5219","title":"Prometheus \u76d1\u63a7"},{"location":"%E9%A6%96%E9%A1%B5/about/","text":"\u5173\u4e8e","title":"\u5173\u4e8e"},{"location":"%E9%A6%96%E9%A1%B5/about/#_1","text":"","title":"\u5173\u4e8e"}]}