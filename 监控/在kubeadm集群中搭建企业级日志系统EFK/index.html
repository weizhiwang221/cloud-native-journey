<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://weizhiwang221.github.io/cloud-native-journey/%E7%9B%91%E6%8E%A7/%E5%9C%A8kubeadm%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%90%AD%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9FEFK/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>åœ¨kubeadmé›†ç¾¤ä¸­æ­å»ºä¼ä¸šçº§æ—¥å¿—ç³»ç»ŸEFK - MengQiu Twenty-nine</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../stylesheets/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\u5728kubeadm\u96c6\u7fa4\u4e2d\u642d\u5efa\u4f01\u4e1a\u7ea7\u65e5\u5fd7\u7cfb\u7edfEFK", url: "#_top", children: [
              {title: "1\ufe0f\u20e3 \u521b\u5efa\u547d\u540d\u7a7a\u95f4 efk", url: "#1-efk" },
              {title: "1\ufe0f\u20e3 \u521b\u5efa\u547d\u540d\u7a7a\u95f4 efk", url: "#1-efk_1" },
              {title: "2\ufe0f\u20e3 \u521b\u5efa DaemonSet \u8bbe\u7f6e\u5185\u6838\u53c2\u6570", url: "#2-daemonset" },
              {title: "3\ufe0f\u20e3 \u90e8\u7f72 Elasticsearch\uff08\u5355\u8282\u70b9\uff09", url: "#3-elasticsearch" },
              {title: "4\ufe0f\u20e3 \u90e8\u7f72 Kibana", url: "#4-kibana" },
              {title: "5\ufe0f\u20e3 \u90e8\u7f72 Fluent Bit", url: "#5-fluent-bit" },
              {title: "\ud83d\udd0d \u9a8c\u8bc1\u65e5\u5fd7\u91c7\u96c6", url: "#_1" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../%E9%9D%A2%E8%AF%95/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../%E9%9D%A2%E8%AF%95/" class="btn btn-xs btn-link">
        Index
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../%E6%95%85%E9%9A%9C/kubernetes%E6%95%85%E9%9A%9C/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../%E6%95%85%E9%9A%9C/kubernetes%E6%95%85%E9%9A%9C/" class="btn btn-xs btn-link">
        kubernetesæ•…éšœ
      </a>
    </div>
    
  </div>

    

    <h1 id="kubeadmefk">åœ¨kubeadmé›†ç¾¤ä¸­æ­å»ºä¼ä¸šçº§æ—¥å¿—ç³»ç»ŸEFK</h1>
<ol>
<li>ç¡®è®¤é›†ç¾¤æ­£å¸¸ï¼š</li>
</ol>
<pre><code>kubectl cluster-info
kubectl get nodes -o wide
</code></pre>
<ol>
<li>
<p>ç”±äºä½ æ˜¯ <strong>å•èŠ‚ç‚¹é›†ç¾¤</strong>ï¼Œé»˜è®¤ <code>control-plane</code> èŠ‚ç‚¹æœ‰æ±¡ç‚¹ï¼ŒPod ä¸ä¼šè°ƒåº¦åˆ°å®ƒã€‚å¯ä»¥é€‰æ‹©ï¼š</p>
</li>
<li>
<p><strong>æ–¹æ³•Aï¼ˆæ¨èï¼‰ï¼š</strong> åœ¨åé¢ YAML é‡Œéƒ½åŠ ä¸Š tolerationsã€‚</p>
</li>
<li>
<p><strong>æ–¹æ³•Bï¼š</strong> ç›´æ¥ç§»é™¤æ±¡ç‚¹ï¼š</p>
<p><code>kubectl taint nodes --all node-role.kubernetes.io/control-plane- || true</code></p>
</li>
<li>
<p>æ£€æŸ¥æœ‰æ²¡æœ‰é»˜è®¤çš„ <strong>StorageClass</strong>ï¼ˆåé¢ Elasticsearch è¦ç”¨PVCå­˜å‚¨æ•°æ®ï¼‰ï¼š</p>
</li>
</ol>
<pre><code>kubectl get sc
</code></pre>
<ul>
<li>å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å¿«é€Ÿè£…ä¸€ä¸ªè½»é‡çš„æœ¬åœ°å­˜å‚¨ï¼š</li>
</ul>
<p><code>kubectl apply -f https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml
  kubectl annotate sc local-path storageclass.kubernetes.io/is-default-class="true"</code></p>
<hr />
<p>è¦ä¸è¦æˆ‘å¸®ä½ å…ˆå†™ä¸€ä¸ª <strong>åˆ›å»ºå‘½åç©ºé—´ efk</strong> çš„ YAML å’Œå‘½ä»¤ï¼Ÿè¿™æ ·æˆ‘ä»¬ä»è¿™é‡Œå¼€å§‹ï¼Œä¸€æ­¥æ­¥å¾€ä¸‹æ­å»ºã€‚</p>
<h3 id="1-efk">1ï¸âƒ£ åˆ›å»ºå‘½åç©ºé—´ efk</h3>
<p>ä½ å¯ä»¥ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code>kubectl create namespace efk
</code></pre>
<h3 id="1-efk_1">1ï¸âƒ£ åˆ›å»ºå‘½åç©ºé—´ efk</h3>
<p>ä½ å¯ä»¥ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code>kubectl create namespace efk
</code></pre>
<p>æˆ–è€…å†™æˆä¸€ä¸ª YAML æ¸…å•ï¼ˆå»ºè®®ç”¨è¿™ç§æ–¹å¼ï¼Œæ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†ï¼‰ï¼š</p>
<pre><code># efk-namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: efk
</code></pre>
<p>æ‰§è¡Œï¼š</p>
<pre><code>kubectl apply -f efk-namespace.yaml
</code></pre>
<p>ç„¶åéªŒè¯ï¼š</p>
<pre><code>kubectl get ns
</code></pre>
<hr />
<p>ğŸ‘‰ ä¸‹ä¸€æ­¥æˆ‘ä»¬è¦å¤„ç† <strong>Elasticsearch çš„å‰ç½®å†…æ ¸å‚æ•° vm.max_map_count</strong>ï¼ˆå¦åˆ™å¯åŠ¨ä¼šæŠ¥é”™ï¼‰ã€‚
 è¦ä¸è¦æˆ‘å…ˆå¸®ä½ å†™ä¸€ä¸ª <strong>DaemonSet æ¥è®¾ç½® vm.max_map_count</strong>ï¼Ÿ</p>
<h3 id="2-daemonset">2ï¸âƒ£ åˆ›å»º DaemonSet è®¾ç½®å†…æ ¸å‚æ•°</h3>
<p>æ–°å»ºæ–‡ä»¶ <strong><code>efk-sysctl.yaml</code></strong>ï¼š</p>
<pre><code>apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: efk-sysctl
  namespace: efk
spec:
  selector:
    matchLabels:
      app: efk-sysctl
  template:
    metadata:
      labels:
        app: efk-sysctl
    spec:
      hostPID: true
      tolerations:
        - key: &quot;node-role.kubernetes.io/control-plane&quot;
          operator: &quot;Exists&quot;
          effect: &quot;NoSchedule&quot;
      containers:
        - name: sysctl
          image: busybox:1.36
          securityContext:
            privileged: true
          command: [&quot;sh&quot;, &quot;-c&quot;]
          args:
            - |
              sysctl -w vm.max_map_count=262144
              sysctl -w fs.file-max=1048576
              # å®¹å™¨ä¿æŒå­˜æ´»
              sleep 3600000
</code></pre>
<p>åº”ç”¨ï¼š</p>
<pre><code>kubectl apply -f efk-sysctl.yaml
</code></pre>
<p>æ£€æŸ¥æ˜¯å¦è¿è¡ŒæˆåŠŸï¼š</p>
<pre><code>kubectl -n efk get pods -o wide
</code></pre>
<p>ç™»å½•èŠ‚ç‚¹ç¡®è®¤å‚æ•°å·²ç”Ÿæ•ˆï¼š</p>
<pre><code>sysctl -n vm.max_map_count
</code></pre>
<p>æ­£å¸¸çš„è¯åº”è¯¥è¾“å‡ºï¼š<code>262144</code></p>
<h3 id="3-elasticsearch">3ï¸âƒ£ éƒ¨ç½² Elasticsearchï¼ˆå•èŠ‚ç‚¹ï¼‰</h3>
<p>æ–°å»ºæ–‡ä»¶ <strong><code>elasticsearch-single.yaml</code></strong>ï¼š</p>
<pre><code>apiVersion: v1
kind: Service
metadata:
  name: elasticsearch
  namespace: efk
  labels:
    app: elasticsearch
spec:
  ports:
    - name: http
      port: 9200
      targetPort: 9200
  selector:
    app: elasticsearch
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: elasticsearch
  namespace: efk
spec:
  serviceName: elasticsearch
  replicas: 1
  selector:
    matchLabels:
      app: elasticsearch
  template:
    metadata:
      labels:
        app: elasticsearch
    spec:
      tolerations:
        - key: &quot;node-role.kubernetes.io/control-plane&quot;
          operator: &quot;Exists&quot;
          effect: &quot;NoSchedule&quot;
      containers:
        - name: es
          image: docker.io/elasticsearch:8.14.1
          ports:
            - containerPort: 9200
              name: http
            - containerPort: 9300
              name: transport
          env:
            - name: discovery.type
              value: single-node
            - name: ES_JAVA_OPTS
              value: &quot;-Xms512m -Xmx512m&quot;
            - name: xpack.security.enabled
              value: &quot;false&quot;   # å•æœºæµ‹è¯•å…³é—­å®‰å…¨è®¤è¯
          volumeMounts:
            - name: es-data
              mountPath: /usr/share/elasticsearch/data
          resources:
            requests:
              cpu: &quot;250m&quot;
              memory: &quot;1Gi&quot;
            limits:
              cpu: &quot;1&quot;
              memory: &quot;2Gi&quot;
  volumeClaimTemplates:
    - metadata:
        name: es-data
      spec:
        accessModes: [&quot;ReadWriteOnce&quot;]
        storageClassName: &quot;local-path&quot;  # å¦‚æœä½ ç”¨äº† local-path-provisioner
        resources:
          requests:
            storage: 20Gi
</code></pre>
<p>åº”ç”¨ï¼š</p>
<pre><code>kubectl apply -f elasticsearch-single.yaml
</code></pre>
<p>ç­‰å¾…å¯åŠ¨å®Œæˆï¼š</p>
<pre><code>kubectl -n efk rollout status sts/elasticsearch
</code></pre>
<p>æ£€æŸ¥ Podï¼š</p>
<pre><code>kubectl -n efk get pods -o wide
</code></pre>
<p>æµ‹è¯•è®¿é—®ï¼š</p>
<pre><code>kubectl -n efk port-forward svc/elasticsearch 9200:9200 &amp;
curl http://127.0.0.1:9200
</code></pre>
<p>æ­£å¸¸çš„è¯ä¼šè¿”å› Elasticsearch çš„ JSON ä¿¡æ¯ã€‚</p>
<h6 id="chatgpt">ChatGPT è¯´ï¼š</h6>
<p>å¥½çš„ ğŸ‘ æˆ‘ä»¬ç»§ç»­æ¥éƒ¨ç½² <strong>Kibana</strong>ï¼Œå®ƒæ˜¯ Elasticsearch çš„å¯è§†åŒ–ç•Œé¢ã€‚</p>
<h3 id="4-kibana">4ï¸âƒ£ éƒ¨ç½² Kibana</h3>
<p>æ–°å»ºæ–‡ä»¶ <strong><code>kibana.yaml</code></strong>ï¼š</p>
<pre><code>apiVersion: v1
kind: Service
metadata:
  name: kibana
  namespace: efk
  labels:
    app: kibana
spec:
  type: NodePort   # å•èŠ‚ç‚¹é›†ç¾¤ï¼Œæ–¹ä¾¿å¤–éƒ¨è®¿é—®
  ports:
    - name: http
      port: 5601
      targetPort: 5601
      nodePort: 30601   # è®¿é—®ç«¯å£ï¼Œå¯è‡ªè¡Œä¿®æ”¹
  selector:
    app: kibana
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kibana
  namespace: efk
spec:
  replicas: 1
  selector:
    matchLabels:
      app: kibana
  template:
    metadata:
      labels:
        app: kibana
    spec:
      tolerations:
        - key: &quot;node-role.kubernetes.io/control-plane&quot;
          operator: &quot;Exists&quot;
          effect: &quot;NoSchedule&quot;
      containers:
        - name: kibana
          image: docker.io/kibana:8.14.1
          ports:
            - containerPort: 5601
          env:
            - name: ELASTICSEARCH_HOSTS
              value: &quot;[\&quot;http://elasticsearch.efk.svc:9200\&quot;]&quot;
            - name: NODE_OPTIONS
              value: &quot;--max-old-space-size=2048&quot;
          resources:
            requests:
              cpu: &quot;100m&quot;
              memory: &quot;256Mi&quot;
            limits:
              cpu: &quot;500m&quot;
              memory: &quot;512Mi&quot;
</code></pre>
<p>åº”ç”¨ï¼š</p>
<pre><code>kubectl apply -f kibana.yaml
</code></pre>
<p>ç­‰å¾…å¯åŠ¨ï¼š</p>
<pre><code>kubectl -n efk rollout status deploy/kibana
</code></pre>
<p>æ£€æŸ¥ Podï¼š</p>
<pre><code>kubectl -n efk get pods -o wide
</code></pre>
<p>ç„¶åè®¿é—®ï¼š</p>
<pre><code>http://&lt;ä½ çš„èŠ‚ç‚¹IP&gt;:30601
</code></pre>
<p>å°±èƒ½çœ‹åˆ° Kibana ç•Œé¢å•¦ ğŸ‰</p>
<hr />
<p>âœ… Kibana å·²ç»æ­å»ºå¥½äº†ã€‚</p>
<h3 id="5-fluent-bit">5ï¸âƒ£ éƒ¨ç½² Fluent Bit</h3>
<h4 id="51-rbac">5.1 åˆ›å»º RBAC</h4>
<p>æ–°å»ºæ–‡ä»¶ <strong><code>fluent-bit-rbac.yaml</code></strong>ï¼š</p>
<pre><code>apiVersion: v1
kind: ServiceAccount
metadata:
  name: fluent-bit
  namespace: efk
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: fluent-bit-read
rules:
  - apiGroups: [&quot;&quot;]
    resources: [&quot;pods&quot;, &quot;namespaces&quot;]
    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: fluent-bit-read
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: fluent-bit-read
subjects:
  - kind: ServiceAccount
    name: fluent-bit
    namespace: efk
</code></pre>
<p>åº”ç”¨ï¼š</p>
<pre><code>kubectl apply -f fluent-bit-rbac.yaml
</code></pre>
<hr />
<h4 id="52-configmap">5.2 åˆ›å»º ConfigMap</h4>
<p>æ–°å»ºæ–‡ä»¶ <strong><code>fluent-bit-config.yaml</code></strong>ï¼š</p>
<pre><code>apiVersion: v1
kind: ConfigMap
metadata:
  name: fluent-bit-config
  namespace: efk
data:
  fluent-bit.conf: |
    [SERVICE]
        Flush        5
        Daemon       Off
        Log_Level    debug
        Parsers_File parsers.conf

    [INPUT]
        Name              tail
        Path              /var/log/containers/*.log
        Exclude_Path      /var/log/containers/*_fluent-bit-*
        Tag               kube.*
        Mem_Buf_Limit     50MB
        Skip_Long_Lines   On
        Refresh_Interval  5
        Parser            docker

    [FILTER]
        Name                kubernetes
        Match               kube.*
        Kube_URL            https://kubernetes.default.svc:443
        Kube_Tag_Prefix     kube.var.log.containers.
        Merge_Log           On
        Keep_Log            Off
        K8S-Logging.Parser  On
        K8S-Logging.Exclude Off

    [OUTPUT]
        Name            es
        Match           kube.*
        Host            elasticsearch.efk.svc
        Port            9200
        Logstash_Format On
        Logstash_Prefix kubernetes
        Replace_Dots    On
        Retry_Limit     False

  parsers.conf: |
    [PARSER]
        Name        docker
        Format      json
        Time_Key    time
        Time_Format %Y-%m-%dT%H:%M:%S.%L%z

</code></pre>
<p>åº”ç”¨ï¼š</p>
<pre><code>kubectl apply -f fluent-bit-config.yaml
</code></pre>
<hr />
<p>âœ… åˆ°è¿™é‡Œï¼ŒRBAC å’Œé…ç½®æ–‡ä»¶å°±å‡†å¤‡å¥½äº†ã€‚
 ä¸‹ä¸€æ­¥å°±æ˜¯éƒ¨ç½² <strong>Fluent Bit DaemonSet</strong>ï¼Œå®ƒä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹è¿è¡Œå¹¶é‡‡é›†æ—¥å¿—ã€‚</p>
<p>å¥½ï¼Œæˆ‘ä»¬æœ€åä¸€æ­¥æ¥å†™ <strong>Fluent Bit DaemonSet</strong>ï¼Œè¿™æ ·å°±èƒ½åœ¨èŠ‚ç‚¹ä¸Šé‡‡é›†å®¹å™¨æ—¥å¿—å¹¶å‘é€åˆ° Elasticsearchã€‚</p>
<hr />
<h4 id="53-fluent-bit-daemonset">5.3 åˆ›å»º Fluent Bit DaemonSet</h4>
<p>æ–°å»ºæ–‡ä»¶ <strong><code>fluent-bit-daemonset.yaml</code></strong>ï¼š</p>
<pre><code>apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: fluent-bit
  namespace: efk
  labels:
    app.kubernetes.io/name: fluent-bit
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: fluent-bit
  template:
    metadata:
      labels:
        app.kubernetes.io/name: fluent-bit
    spec:
      serviceAccountName: fluent-bit
      securityContext:
        runAsUser: 0
        runAsGroup: 0
        fsGroup: 0
      tolerations:
        - key: &quot;node-role.kubernetes.io/control-plane&quot;
          operator: &quot;Exists&quot;
          effect: &quot;NoSchedule&quot;
      containers:
        - name: fluent-bit
          image: fluent/fluent-bit:2.9.9
          args: [&quot;-c&quot;, &quot;/fluent-bit/etc/fluent-bit.conf&quot;]
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
            limits:
              cpu: 500m
              memory: 256Mi
          volumeMounts:
            - name: varlog
              mountPath: /var/log
            - name: config
              mountPath: /fluent-bit/etc/
      terminationGracePeriodSeconds: 10
      volumes:
        - name: varlog
          hostPath:
            path: /var/log
            type: Directory
        - name: config
          configMap:
            name: fluent-bit-config
            defaultMode: 420

</code></pre>
<p>åº”ç”¨ï¼š</p>
<pre><code>kubectl apply -f fluent-bit-daemonset.yaml
</code></pre>
<hr />
<h3 id="_1">ğŸ” éªŒè¯æ—¥å¿—é‡‡é›†</h3>
<ol>
<li>æŸ¥çœ‹ Pod æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</li>
</ol>
<pre><code>kubectl -n efk get pods -o wide
</code></pre>
<ol>
<li>æŸ¥çœ‹ Fluent Bit æ—¥å¿—ç¡®è®¤è¾“å‡ºåˆ° ESï¼š</li>
</ol>
<pre><code>kubectl -n efk logs -l app.kubernetes.io/name=fluent-bit
</code></pre>
<ol>
<li>æ£€æŸ¥ Elasticsearch æ˜¯å¦æœ‰æ–°ç´¢å¼•ï¼š</li>
</ol>
<pre><code>kubectl -n efk port-forward svc/elasticsearch 9200:9200 &amp;
curl 'http://127.0.0.1:9200/_cat/indices?v'
</code></pre>
<p>åº”è¯¥èƒ½çœ‹åˆ° <code>kubernetes-*</code> å¼€å¤´çš„ç´¢å¼•ã€‚</p>
<ol>
<li>æ‰“å¼€ Kibanaï¼ˆhttp://&lt;ä½ çš„èŠ‚ç‚¹IP&gt;:30601ï¼‰ï¼Œåœ¨ <strong>Stack Management â†’ Index Patterns</strong> é‡Œæ·»åŠ  <code>kubernetes-*</code>ï¼Œé€‰æ‹© <code>@timestamp</code> å­—æ®µï¼Œå°±èƒ½å¼€å§‹åœ¨ <strong>Discover</strong> é‡ŒæŸ¥çœ‹æ—¥å¿—äº† ğŸ‰</li>
</ol>
<hr />
<p>âœ… åˆ°è¿™é‡Œï¼Œä¸€æ•´å¥— <strong>EFK æ—¥å¿—ç³»ç»Ÿ</strong> å°±éƒ¨ç½²å®Œæˆäº†ã€‚</p>
<p>æ‰§è¡ŒæŠ¥<code>kubectl -n efk port-forward svc/elasticsearch 9200:9200 &amp;</code>æŠ¥é”™</p>
<pre><code class="language-shell">[root@k8s-master efk]# kubectl -n efk port-forward svc/elasticsearch 9200:9200 &amp;
[1] 67634
[root@k8s-master efk]# Forwarding from 127.0.0.1:9200 -&gt; 9200
Handling connection for 9200
E0825 16:44:40.755824   67634 portforward.go:424] &quot;Unhandled Error&quot; err=&quot;an error occurred forwarding 9200 -&gt; 9200: error forwarding port 9200 to pod 95b8653b6a8b5d4382d72af972b42cdc3a967c0cb50429cbd00ca703b424a510, uid : unable to do port forwarding: socat not found&quot;
error: lost connection to pod

</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="language-shell"># è¯´æ˜ Kubernetes æœ¬åœ°çš„ port-forward åŠŸèƒ½éœ€è¦ socat æ¥è½¬å‘ç«¯å£ï¼Œä½†ä½ çš„ç³»ç»Ÿé‡Œæ²¡æœ‰å®‰è£…å®ƒã€‚
yum install -y socat
</code></pre>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../%E9%9D%A2%E8%AF%95/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../%E9%9D%A2%E8%AF%95/" class="btn btn-xs btn-link">
        Index
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../%E6%95%85%E9%9A%9C/kubernetes%E6%95%85%E9%9A%9C/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../%E6%95%85%E9%9A%9C/kubernetes%E6%95%85%E9%9A%9C/" class="btn btn-xs btn-link">
        kubernetesæ•…éšœ
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content"><p>Copyright &copy; 2025 WeiZhiwang | 
<a href="https://github.com/weizhiwang221/cloud-native-journey" target="_blank" rel="noopener">View on GitHub</a>
</p>
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>